import{a as Je}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-2BTSMNNV.js";import{a as Be,b as Bt,c as an,d as cn,e as gn,f as ri,g as Pn,h as q,j as Ut,k as Bn,l as Ln}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-EQPHPHLM.js";import{a as On,b as Rn,h as Dn}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-4RF6ZTAV.js";import{a as Nn}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-XUVZ2IS6.js";import{c as te,d as Lt,e as dn,f as Ee,g as ln,k as xn,m as kn,o as Tn,q as In,s as Cn,t as _n,u as An,v as Mn}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-24U2NGUS.js";import"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-P2VCHE7X.js";import{g as Un,j as Fn}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-IAHNTNKP.js";import"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-PU6NIBYT.js";import{a as un,b as pn,d as xe,e as mn,h as Le,i as ke}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-VGAFRYAX.js";import"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-LUX5X2MX.js";import{a as Qr,b as en,c as Dt,d as tn,e as rn,f as nn,i as on,j as sn,k as ce}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-2CI3SVVW.js";import"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-ZUTHNTSJ.js";import{a as or,d as fn,e as Xe}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-YKEEIDG4.js";import{a as sr,b as ar}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-J47KEYPJ.js";import{a as Oe}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-IEUOWR3E.js";import"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-UJMVQTJL.js";import"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-YCDGZ3J2.js";import"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-K4BEP576.js";import{a as _r,d as Ar,e as J,f as Mr,g as se}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-MAQLOKX6.js";import{$a as Ge,A as hr,B as xt,C as ve,Ca as _t,D as kt,Db as De,E as qe,Ea as At,F as yr,Fa as ae,Fb as Yr,G as Tt,Ga as G,H as br,Hb as Zr,I as wr,Ib as Rt,J as vr,Jb as Xr,Jc as En,K as Sr,L as Pe,Lb as Jr,M as Er,Mb as Ze,N as xr,Na as Dr,O as kr,Oa as ee,Q as Tr,R as Ir,Sa as Mt,Ta as Nt,Ua as Se,V as Cr,Va as Br,W as U,Xa as ge,Xb as j,Ya as Lr,Za as Ur,_a as Fr,a as ei,ab as Ye,ac as hn,b as ti,c as B,cb as $r,d as L,e as f,f as z,g as me,gb as Kr,h as O,ha as Nr,hb as Hr,i as X,ia as Q,ib as Wr,j as ir,k as E,kb as zr,l as cr,lb as Vr,lc as yn,m as dr,mb as jr,mc as bn,n as H,nb as Re,o as Ne,oa as It,ob as Pt,oc as wn,p as _,q as lr,qc as vn,r as ur,s as pr,sc as Sn,t as mr,ta as Ct,tb as qr,u as gr,ua as Pr,ub as fe,v as fr,vb as Ot,w as N,wa as Or,x as St,xa as Rr,y as ie,yb as Gr,z as Et}from"./e94e472bb4310523682452ee5a3c92409df51b60-chunk-SIHBU5FI.js";var Ko=ei((Ke,pt)=>{f();(function(t,e){"use strict";var r="0.7.33",n="",o="?",s="function",l="undefined",p="object",u="string",h="major",c="model",m="name",d="type",i="vendor",a="version",y="architecture",b="console",g="mobile",w="tablet",v="smarttv",M="wearable",x="embedded",D=350,K="Amazon",F="Apple",oe="ASUS",ue="BlackBerry",Z="Browser",pe="Chrome",mt="Edge",ye="Firefox",be="Google",Ce="Huawei",gt="LG",ft="Microsoft",Zt="Motorola",He="Opera",ht="Samsung",Xt="Sharp",We="Sony",yt="Xiaomi",bt="Zebra",Jt="Facebook",Xo=function(k,A){var T={};for(var R in k)A[R]&&A[R].length%2===0?T[R]=A[R].concat(k[R]):T[R]=k[R];return T},ze=function(k){for(var A={},T=0;T<k.length;T++)A[k[T].toUpperCase()]=k[T];return A},Qt=function(k,A){return typeof k===u?_e(A).indexOf(_e(k))!==-1:!1},_e=function(k){return k.toLowerCase()},Jo=function(k){return typeof k===u?k.replace(/[^\d\.]/g,n).split(".")[0]:e},wt=function(k,A){if(typeof k===u)return k=k.replace(/^\s\s*/,n),typeof A===l?k:k.substring(0,D)},Ae=function(k,A){for(var T=0,R,I,je,P,Me,Y;T<A.length&&!Me;){var rr=A[T],nr=A[T+1];for(R=I=0;R<rr.length&&!Me;)if(Me=rr[R++].exec(k),Me)for(je=0;je<nr.length;je++)Y=Me[++I],P=nr[je],typeof P===p&&P.length>0?P.length===2?typeof P[1]==s?this[P[0]]=P[1].call(this,Y):this[P[0]]=P[1]:P.length===3?typeof P[1]===s&&!(P[1].exec&&P[1].test)?this[P[0]]=Y?P[1].call(this,Y,P[2]):e:this[P[0]]=Y?Y.replace(P[1],P[2]):e:P.length===4&&(this[P[0]]=Y?P[3].call(this,Y.replace(P[1],P[2])):e):this[P]=Y||e;T+=2}},vt=function(k,A){for(var T in A)if(typeof A[T]===p&&A[T].length>0){for(var R=0;R<A[T].length;R++)if(Qt(A[T][R],k))return T===o?e:T}else if(Qt(A[T],k))return T===o?e:T;return k},Qo={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},er={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},tr={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[a,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[a,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,a],[/opios[\/ ]+([\w\.]+)/i],[a,[m,He+" Mini"]],[/\bopr\/([\w\.]+)/i],[a,[m,He]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[m,a],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[a,[m,"UC"+Z]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[a,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[a,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[a,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[a,[m,"IE"]],[/yabrowser\/([\w\.]+)/i],[a,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+Z],a],[/\bfocus\/([\w\.]+)/i],[a,[m,ye+" Focus"]],[/\bopt\/([\w\.]+)/i],[a,[m,He+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[a,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[a,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[a,[m,He+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[a,[m,"MIUI "+Z]],[/fxios\/([-\w\.]+)/i],[a,[m,ye]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+Z]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+Z],a],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],a],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,a],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,Jt],a],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,a],[/\bgsa\/([\w\.]+) .*safari\//i],[a,[m,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[a,[m,pe+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,pe+" WebView"],a],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[a,[m,"Android "+Z]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,a],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[a,[m,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[a,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[a,vt,Qo]],[/(webkit|khtml)\/([\w\.]+)/i],[m,a],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],a],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[a,[m,ye+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[m,a],[/(cobalt)\/([\w\.]+)/i],[m,[a,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,_e]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[y,/ower/,n,_e]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[y,_e]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[i,ht],[d,w]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[i,ht],[d,g]],[/((ipod|iphone)\d+,\d+)/i],[c,[i,F],[d,g]],[/(ipad\d+,\d+)/i],[c,[i,F],[d,w]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[i,F],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[i,F],[d,w]],[/(macintosh);/i],[c,[i,F]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[i,Ce],[d,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[i,Ce],[d,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[i,yt],[d,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[i,yt],[d,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[i,"OPPO"],[d,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[i,"Vivo"],[d,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[i,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[i,Zt],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[i,Zt],[d,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[i,gt],[d,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[i,gt],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[i,"Lenovo"],[d,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[i,"Nokia"],[d,g]],[/(pixel c)\b/i],[c,[i,be],[d,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[i,be],[d,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[i,We],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[i,We],[d,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[i,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[i,K],[d,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[i,K],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[c,i,[d,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[i,ue],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[i,oe],[d,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[i,oe],[d,g]],[/(nexus 9)/i],[c,[i,"HTC"],[d,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[i,[c,/_/g," "],[d,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[i,"Acer"],[d,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[i,"Meizu"],[d,g]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[i,Xt],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[i,c,[d,g]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[i,c,[d,w]],[/(surface duo)/i],[c,[i,ft],[d,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[i,"Fairphone"],[d,g]],[/(u304aa)/i],[c,[i,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[c,[i,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[c,[i,"RCA"],[d,w]],[/\b(venue[\d ]{2,7}) b/i],[c,[i,"Dell"],[d,w]],[/\b(q(?:mv|ta)\w+) b/i],[c,[i,"Verizon"],[d,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[i,"Barnes & Noble"],[d,w]],[/\b(tm\d{3}\w+) b/i],[c,[i,"NuVision"],[d,w]],[/\b(k88) b/i],[c,[i,"ZTE"],[d,w]],[/\b(nx\d{3}j) b/i],[c,[i,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[c,[i,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[c,[i,"Swiss"],[d,w]],[/\b((zeki)?tb.*\b) b/i],[c,[i,"Zeki"],[d,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[i,"Dragon Touch"],c,[d,w]],[/\b(ns-?\w{0,9}) b/i],[c,[i,"Insignia"],[d,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[i,"NextBook"],[d,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[i,"Voice"],c,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[i,"LvTel"],c,[d,g]],[/\b(ph-1) /i],[c,[i,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[i,"Envizen"],[d,w]],[/\b(trio[-\w\. ]+) b/i],[c,[i,"MachSpeed"],[d,w]],[/\btu_(1491) b/i],[c,[i,"Rotor"],[d,w]],[/(shield[\w ]+) b/i],[c,[i,"Nvidia"],[d,w]],[/(sprint) (\w+)/i],[i,c,[d,g]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[i,ft],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[i,bt],[d,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[i,bt],[d,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[i,c,[d,b]],[/droid.+; (shield) bui/i],[c,[i,"Nvidia"],[d,b]],[/(playstation [345portablevi]+)/i],[c,[i,We],[d,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[i,ft],[d,b]],[/smart-tv.+(samsung)/i],[i,[d,v]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[i,ht],[d,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[i,gt],[d,v]],[/(apple) ?tv/i],[i,[c,F+" TV"],[d,v]],[/crkey/i],[[c,pe+"cast"],[i,be],[d,v]],[/droid.+aft(\w)( bui|\))/i],[c,[i,K],[d,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[i,Xt],[d,v]],[/(bravia[\w ]+)( bui|\))/i],[c,[i,We],[d,v]],[/(mitv-\w{5}) bui/i],[c,[i,yt],[d,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[i,wt],[c,wt],[d,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,v]],[/((pebble))app/i],[i,c,[d,M]],[/droid.+; (glass) \d/i],[c,[i,be],[d,M]],[/droid.+; (wt63?0{2,3})\)/i],[c,[i,bt],[d,M]],[/(quest( 2)?)/i],[c,[i,Jt],[d,M]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[i,[d,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[d,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[i,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[a,[m,mt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[a,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[m,a],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[a,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,a],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[a,vt,er]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[a,vt,er]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[a,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,"Mac OS"],[a,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[a,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,a],[/\(bb(10);/i],[a,[m,ue]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[a,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[a,[m,ye+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[a,[m,"webOS"]],[/crkey\/([\d\.]+)/i],[a,[m,pe+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[m,"Chromium OS"],a],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,a],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],a],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[m,a]]},V=function(k,A){if(typeof k===p&&(A=k,k=e),!(this instanceof V))return new V(k,A).getResult();var T=k||(typeof t!==l&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:n),R=A?Xo(tr,A):tr;return this.getBrowser=function(){var I={};return I[m]=e,I[a]=e,Ae.call(I,T,R.browser),I.major=Jo(I.version),I},this.getCPU=function(){var I={};return I[y]=e,Ae.call(I,T,R.cpu),I},this.getDevice=function(){var I={};return I[i]=e,I[c]=e,I[d]=e,Ae.call(I,T,R.device),I},this.getEngine=function(){var I={};return I[m]=e,I[a]=e,Ae.call(I,T,R.engine),I},this.getOS=function(){var I={};return I[m]=e,I[a]=e,Ae.call(I,T,R.os),I},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return T},this.setUA=function(I){return T=typeof I===u&&I.length>D?wt(I,D):I,this},this.setUA(T),this};V.VERSION=r,V.BROWSER=ze([m,a,h]),V.CPU=ze([y]),V.DEVICE=ze([c,i,d,b,g,v,w,M,x]),V.ENGINE=V.OS=ze([m,a]),typeof Ke!==l?(typeof pt!==l&&pt.exports&&(Ke=pt.exports=V),Ke.UAParser=V):s==="object"&&null.amd?null(function(){return V}):typeof t!==l&&(t.UAParser=V);var we=typeof t!==l&&(t.jQuery||t.Zepto);if(we&&!we.ua){var Ve=new V;we.ua=Ve.getResult(),we.ua.get=function(){return Ve.getUA()},we.ua.set=function(k){Ve.setUA(k);var A=Ve.getResult();for(var T in A)we.ua[T]=A[T]}}})(typeof window=="object"?window:Ke)});f();f();(function(){try{var t=typeof window<"u"||typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="36d305fa-a3d4-4ab2-a327-b3f6491b3205",t._sentryDebugIdIdentifier="sentry-dbid-36d305fa-a3d4-4ab2-a327-b3f6491b3205")}catch(r){}})();f();var Go=B(z()),Yo=B(or());f();var nt=B(z());f();var S=B(z());f();if(typeof document<"u"){let t=document.createElement("style"),e=window.engagement,r=e&&e._configuration&&e._configuration.nonce;if(r)t.setAttribute("nonce",r);else{let n=document.querySelector("[nonce]");if(n){let o=n.nonce||n.getAttribute("nonce");o&&t.setAttribute("nonce",o)}}t.appendChild(document.createTextNode(`#engagement-wrapper *,
#engagement-wrapper *:before,
#engagement-wrapper *:after,
.engagement-nudge-modal *,
.engagement-nudge-modal *:before,
.engagement-nudge-modal *:after,
.engagement-nudge-modal-mock *,
.engagement-nudge-modal-mock *:before,
.engagement-nudge-modal-mock *:after {
  box-sizing: border-box;
}

.engagement-modal > .rc-dialog > .rc-dialog-content {
  background-color: transparent;
}

.engagement-tooltip {
  z-index: 2147483647 !important; /*make the tooltip the highest possible z index*/
}

/*** Hack: Hide this because it's less flexible (classnames can't be changes)
    Instead we only show its children, by translating its children ***/
.engagement-modal > .rc-dialog > .rc-dialog-content > .rc-dialog-header {
  max-height: 0px !important;
  padding: 0px !important;
}

.engagement-modal > .rc-dialog {
  left: 0px;
  transition: left 0.3s;
}

.engagement-modal > .rc-dialog > .rc-dialog-content > .rc-dialog-body {
  position: relative !important;
}

/* TestMode inline engagement */
.engagement-modal-inline.rc-dialog-wrap {
  position: relative;
  height: 100%;
}

#engagement-toast-container {
  inset: 16px;
  @media (max-width: 400px) {
    inset: 8px;
  }
}

#engagement-toast-responsive-inner-div {
  @media (max-width: 400px) {
    width: 100%;
  }
}


#engagement-container > div {
  height: 100%;
}

#engagement-home > .rc-dialog-root {
  height: 100%;
}

#engagement-wrapper .rc-header-guidance {
  background: rgba(174, 177, 221, 1) !important;
  filter: brightness(135%);
  border-radius: 2px 2px 0px 0px !important;
  border-bottom: 0px !important;
  padding: 8px 30px 2px 30px !important;
  margin: 0px 10px 0px 10px;
  box-shadow: rgba(0, 0, 0, 0.15) 0px 3px 10px !important;
  font-weight: 400;
  text-align: center;
}

@keyframes fontbulger {
  0% {
    font-size: 10px;
  }
  30% {
    font-size: 15px;
  }
  100% {
    font-size: 12px;
  }
}

@keyframes shimmer {
  0% {
    background-position: top left;
  }
  100% {
    background-position: top right;
  }
}

.engagement-category-collapse {
  transform: scale(1, -1);
  transition: 0.3s ease-in;
  cursor: pointer;
}

.engagement-category-expand {
  transition: 0.3s ease-in;
  cursor: pointer;
}

/* Nudges - modal */

.engagement-nudge-modal {
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2147483644 !important;
}

.engagement-nudge-modal-mock {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 0;
  transition: margin-right cubic-bezier(0.78, 0.14, 0.15, 0.86) 0.3s;
  z-index: 2147483644 !important;
}

/* Nudges - media */

.engagement-help-doc-title::before {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(180deg, transparent 66.67%, gray 93.08%);
  content: '';
}

/* Recorder */
#engagement-recorder-mask {
  background: transparent;
}
`)),document.head.appendChild(t)}f();if(typeof document<"u"){let t=document.createElement("style"),e=window.engagement,r=e&&e._configuration&&e._configuration.nonce;if(r)t.setAttribute("nonce",r);else{let n=document.querySelector("[nonce]");if(n){let o=n.nonce||n.getAttribute("nonce");o&&t.setAttribute("nonce",o)}}t.appendChild(document.createTextNode(`/*** Guidance banner styling and animation ***/
@keyframes example {
  from {
    transform: translateY(0px);
  }
  to {
    transform: translateY(-30px);
  }
}

.rc-header-guidance {
  animation: example 0.5s;
  animation-fill-mode: forwards;
}

/*** engagement entry animation ***/
/*** We can't do exit animation because rc-dialog makes display: none ***/
@keyframes onEntry {
  0% {
    opacity: 0.3;
  }
  100% {
    opacity: 1;
  }
}

.engagement-opened {
  animation: onEntry 0.1s;
  animation-fill-mode: forwards;
}

@keyframes onSelect {
  0% {
    transform: translate3d(0px, 0px, 0px);
  }
  50% {
    transform: translate3d(0px, 0px, -0.5px);
  }
  100% {
    transform: translate3d(0px, 0px, 0px);
  }
}

.engagement-selected {
  animation: onSelect 0.4s;
}

@keyframes ScaleEntry {
  from {
    transform: scale(0.8);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.engagement-scale-entry-animation {
  animation: ScaleEntry 0.3s;
  animation-fill-mode: forwards;
}

@keyframes onEntry {
  0% {
    opacity: 0.3;
  }
  100% {
    opacity: 1;
  }
}

.engagement-shortcut-tooltip {
  opacity: 0;
  animation: tagEntry 0.2s;
  animation-delay: 0.5s;
  animation-fill-mode: forwards;
}

@keyframes tagExit {
  from {
    transform: scale(1);
    opacity: 1;
  }
  to {
    transform: scale(0.8);
    opacity: 0;
  }
}

.engagement-shortcut-tooltip-remove {
  animation: tagExit 0.2s;
  animation-fill-mode: forwards;
}

.engagement-shortcut-tooltip,
.engagement-shortcut-tooltip-remove {
  z-index: 99999999;
  position: absolute;
  padding: 8px 12px;
  background-color: rgba(0, 0, 0, 0.8);
  font-family: proxima-nova, sans-serif;
  color: rgba(255, 255, 255, 0.6);
  border-radius: 4px;
  font-size: 13px;
}

.engagement-shortcut-tooltip-tag {
  margin-left: 10px;
  padding: 2px 5px;
  border-radius: 2px;
  background-color: grey;
}

#engagement-launcher {
  animation: 0.25s ease-out scaleIn;
}

@keyframes scaleIn {
  0% {
    transform: scale(0.06);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes growFromBottom {
  0% {
    transform: scale(1, 0.3);
  }

  100% {
    transform: scale(1, 1);
  }
}
`)),document.head.appendChild(t)}f();var Ft=class{constructor(){L(this,"organization")}getOrganization(){return this.organization}setOrganization(e){this.organization=e}},$n=new Ft;f();var ni=function(e,r,n){for(var o=0,s=0;o=s,s=qe(),o===38&&s===12&&(r[n]=1),!Tt(s);)kt();return yr(e,xt)},oi=function(e,r){var n=-1,o=44;do switch(Tt(o)){case 0:o===38&&qe()===12&&(r[n]=1),e[n]+=ni(xt-1,r,n);break;case 2:e[n]+=vr(o);break;case 4:if(o===44){e[++n]=qe()===58?"&\f":"",r[n]=e[n].length;break}default:e[n]+=mr(o)}while(o=kt());return e},ii=function(e,r){return wr(oi(br(e),r))},Kn=new WeakMap,si=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,n=e.parent,o=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!Kn.get(n))&&!o){Kn.set(e,!0);for(var s=[],l=ii(r,s),p=n.props,u=0,h=0;u<l.length;u++)for(var c=0;c<p.length;c++,h++)e.props[h]=s[u]?l[u].replace(/&\f/g,p[c]):p[c]+" "+l[u]}}},ai=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function Hn(t,e){switch(gr(t,e)){case 5103:return _+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return _+t+Ne+t+H+t+t;case 6828:case 4268:return _+t+H+t+t;case 6165:return _+t+H+"flex-"+t+t;case 5187:return _+t+N(t,/(\w+).+(:[^]+)/,_+"box-$1$2"+H+"flex-$1$2")+t;case 5443:return _+t+H+"flex-item-"+N(t,/flex-|-self/,"")+t;case 4675:return _+t+H+"flex-line-pack"+N(t,/align-content|flex-|-self/,"")+t;case 5548:return _+t+H+N(t,"shrink","negative")+t;case 5292:return _+t+H+N(t,"basis","preferred-size")+t;case 6060:return _+"box-"+N(t,"-grow","")+_+t+H+N(t,"grow","positive")+t;case 4554:return _+N(t,/([^-])(transform)/g,"$1"+_+"$2")+t;case 6187:return N(N(N(t,/(zoom-|grab)/,_+"$1"),/(image-set)/,_+"$1"),t,"")+t;case 5495:case 3959:return N(t,/(image-set\([^]*)/,_+"$1$`$1");case 4968:return N(N(t,/(.+:)(flex-)?(.*)/,_+"box-pack:$3"+H+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+_+t+t;case 4095:case 3583:case 4068:case 2532:return N(t,/(.+)-inline(.+)/,_+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Et(t)-1-e>6)switch(ie(t,e+1)){case 109:if(ie(t,e+4)!==45)break;case 102:return N(t,/(.+:)(.+)-([^]+)/,"$1"+_+"$2-$3$1"+Ne+(ie(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~St(t,"stretch")?Hn(N(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(ie(t,e+1)!==115)break;case 6444:switch(ie(t,Et(t)-3-(~St(t,"!important")&&10))){case 107:return N(t,":",":"+_)+t;case 101:return N(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+_+(ie(t,14)===45?"inline-":"")+"box$3$1"+_+"$2$3$1"+H+"$2box$3")+t}break;case 5936:switch(ie(t,e+11)){case 114:return _+t+H+N(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return _+t+H+N(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return _+t+H+N(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return _+t+H+t+t}return t}var ci=function(e,r,n,o){if(e.length>-1&&!e.return)switch(e.type){case ur:e.return=Hn(e.value,e.length);break;case pr:return Pe([ve(e,{value:N(e.value,"@","@"+_)})],o);case lr:if(e.length)return hr(e.props,function(s){switch(fr(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Pe([ve(e,{props:[N(s,/:(read-\w+)/,":"+Ne+"$1")]})],o);case"::placeholder":return Pe([ve(e,{props:[N(s,/:(plac\w+)/,":"+_+"input-$1")]}),ve(e,{props:[N(s,/:(plac\w+)/,":"+Ne+"$1")]}),ve(e,{props:[N(s,/:(plac\w+)/,H+"input-$1")]})],o)}return""})}},di=[ci],Wn=function(e){var r=e.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(y){var b=y.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var o=e.stylisPlugins||di,s={},l,p=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(y){for(var b=y.getAttribute("data-emotion").split(" "),g=1;g<b.length;g++)s[b[g]]=!0;p.push(y)});var u,h=[si,ai];{var c,m=[Er,kr(function(y){c.insert(y)})],d=xr(h.concat(o,m)),i=function(b){return Pe(Sr(b),d)};u=function(b,g,w,v){c=w,i(b?b+"{"+g.styles+"}":g.styles),v&&(a.inserted[g.name]=!0)}}var a={key:r,sheet:new dr({key:r,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:u};return a.sheet.hydrate(p),a};f();var Te=B(z()),li=(t=document.body)=>{var o,s;let e=(0,Te.useRef)(null),r=(0,Te.useRef)(null),n=(0,Te.useRef)(null);return(0,Te.useEffect)(()=>()=>{var l,p;(l=r.current)==null||l.disconnect(),(p=e.current)==null||p.remove()},[]),(e.current===null||t!==n.current)&&((o=r.current)==null||o.disconnect(),(s=e.current)==null||s.remove(),n.current=t,e.current=document.createElement("div"),e.current.setAttribute("data-engagement-toplevel-styles",""),e.current.setAttribute("hidden",""),t.prepend(e.current),r.current=new MutationObserver(()=>{e.current&&e.current.querySelectorAll("style[data-emotion]:not([data-s])").forEach(l=>{l.setAttribute("data-s","")})}),r.current.observe(e.current,{childList:!0,subtree:!0})),e.current},zn=li;f();var Ue=B(z());var ui=({nudgeActor:t})=>{var h;let e=U(),r=Ee(t,({context:c})=>c.nudge),n=Ee(t,({context:c})=>c.stepIndex),{animStyles:o}=Xe(),s=ge(r,n);if(!s||!(Ye(s)&&s.formFactor.isShowingMask))return null;let{targetElement:l}=gn(e,{step:s}),p=(h=l==null?void 0:l.getBoundingClientRect())!=null?h:new DOMRect,u=l?getComputedStyle(l).borderRadius:"0px";return p.width===0||p.height===0?null:Ue.default.createElement("div",{style:{position:"absolute",top:"0",left:"0",...Oe.getZIndexStyles(s,"mask")}},Ue.default.createElement("div",{"data-testid":"engagement-nudge-mask",style:{width:`${document.documentElement.scrollWidth}px`,height:`${document.documentElement.scrollHeight}px`,clipPath:`polygon(0% 0%, 0% 100%,
                ${p.left+window.scrollX}px 100%,
                ${p.left+window.scrollX}px ${p.top+window.scrollY}px,
                ${p.left+window.scrollX+p.width}px ${p.top+window.scrollY}px,
                ${p.left+window.scrollX+p.width}px ${p.top+window.scrollY+p.height}px,
                0% ${p.top+window.scrollY+p.height}px,
                0% 100%, 100% 100%, 100% 0%)`,position:"absolute"}}),Ue.default.createElement("div",{"data-testid":"engagement-nudge-mask-inner",style:{pointerEvents:"none",position:"absolute",inset:`${p.top+window.scrollY}px ${p.left+window.scrollX}px`,width:`${p.width}px`,height:`${p.height}px`,padding:"4px",borderRadius:`${u}`,boxShadow:`0 0 0 ${Math.max(document.documentElement.scrollHeight,document.documentElement.scrollWidth)}px rgba(0, 0, 0, 0.1)`,overflow:"hidden",opacity:o.opacity,transitionProperty:"opacity",transitionDuration:o.transitionDuration,transitionTimingFunction:o.transitionTimingFunction}}))},Vn=({nudgesManager:t})=>{let e=U(),r=Ee(t,o=>o.context.activeNudge);if(!r)return null;let n=G(e,r==null?void 0:r.variantId);return n?Ue.default.createElement(ui,{nudgeActor:n}):null};f();var jn=t=>{if(t.themeOverride&&t.themeOverride.theme&&t.themeOverride.mode)return t.themeOverride;let e=t.themeMode==="auto"?t.services.getDefaultUIMode():t.themeMode;return{theme:Ar(t.themes),mode:e}};f();var re=B(z()),et=B(z());var de={state:{},subscribers:[],subscribe:t=>(de.subscribers.push(t),()=>{de.subscribers=de.subscribers.filter(e=>e!==t)})},pi=(t,e)=>{switch(e.type){case"SHOW":return{...t,[e.id]:e.payload};case"HIDE":{let r={...t};return delete r[e.id],r}case"HIDE_ALL_MATCHING_PATTERN":if(e.idPattern){let r={...t};for(let n in r)n.match(e.idPattern)&&delete r[n];return r}return{};default:return t}},$t=t=>{let e=pi(de.state,t);de.state=e,de.subscribers.forEach(r=>r(e))},qn=(t,e)=>{$t({type:"SHOW",id:t,payload:e})},Gn=t=>{$t({type:"HIDE_ALL_MATCHING_PATTERN",idPattern:t})},Kt=t=>{let e=document.querySelector(`[data-spacer-for="${t}"]`);e&&e.remove(),$t({type:"HIDE",id:t})},Yn=({children:t})=>{let{isEditorPreview:e}=U(),[r,n]=(0,et.useState)(de.state);return(0,et.useEffect)(()=>de.subscribe(n),[]),re.default.createElement(re.default.Fragment,null,t,re.default.createElement("div",{id:"engagement-nudges-banner-sticky-container",style:{width:"100%",top:"0px",left:0,position:"fixed",pointerEvents:"none",height:"100%"}},Object.entries(r).filter(([,o])=>o.sticky).map(([o,s])=>re.default.createElement("div",{key:o,id:o},s.element))),re.default.createElement("div",{id:"engagement-nudges-banner-inline-container-top",style:{width:"100%",position:"absolute",top:"0",left:0,pointerEvents:"none"}},Object.entries(r).filter(([,o])=>!o.sticky&&o.position==="top").map(([o,s])=>re.default.createElement("div",{key:o,id:o},s.element))),re.default.createElement("div",{id:"engagement-nudges-banner-inline-container-bottom",style:{width:"100%",position:e?void 0:"relative",pointerEvents:"none"}},Object.entries(r).filter(([,o])=>!o.sticky&&o.position==="bottom").map(([o,s])=>re.default.createElement("div",{key:o,id:o},s.element))))};f();var Jn=B(ri()),he=B(z());f();var $=B(z());var mi=j.div`
  height: ${Dt}px;
  position: relative;
  z-index: 50;

  @media screen and (max-height: 820px) {
    transform: scale(0.9);
  }

  @media screen and (max-height: 720px) {
    transform: scale(0.8);
  }

  @media screen and (max-height: 620px) {
    transform: scale(0.7);
  }

  @media screen and (max-height: 560px) {
    transform: scale(0.6);
  }

  @media screen and (max-height: 500px) {
    transform: scale(0.5);
  }

  @media screen and (max-height: 420px) {
    transform: scale(0.4);
  }
`,gi=j.div`
  width: ${tn}px;
  height: ${Dt}px;
  position: relative;
  border-radius: 56px;
  box-shadow: 0px 0px 0px 7.5px #7d7e7d;
  border: 8px solid #000;
  background: linear-gradient(165deg, white, #ebf0ff 45%, #ebf0ff 55%, white);
  outline: 6px solid #2c2c2b;
  padding-top: 60px;
  padding-bottom: 34px;
  overflow: hidden;

  @media screen and (max-width: 670px) {
    height: 790px;
    width: 400px;
  }

  @media screen and (max-width: 580px) {
    height: 720px;
    width: 360px;
  }

  @media screen and (max-width: 480px) {
    height: 650px;
    width: 320px;
  }

  @media screen and (max-width: 400px) {
    height: 580px;
    width: 280px;
  }

  #engagement-nudge-container {
    overflow: auto;
  }
`,fi=j.div`
  height: 100%;
  width: 100%;
  position: relative;
`,hi=j.div`
  position: absolute;
  width: 100%;
  height: 60px;
  top: 0px;
  display: flex;
  justify-content: center;
  padding-top: 12px;
`,yi=j.div`
  height: 37px;
  width: 126px;
  border-radius: 24px;
  background-color: #000000;
  transition: height 0.5s cubic-bezier(0.075, 0.82, 0.165, 1), width 0.5s cubic-bezier(0.075, 0.82, 0.165, 1);

  &:hover {
    height: 45px;
    width: 145px;
  }
`,bi=j.div`
  position: absolute;
  width: 100%;
  height: 34px;
  bottom: 0px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding-bottom: 8px;
`,wi=j.div`
  height: 5px;
  width: 154px;
  border-radius: 24px;
  background-color: #000000;
`,vi=j.div`
  position: absolute;
  height: 100%;
  width: 100%;
  top: 0px;
  bottom: 0px;
`,Zn=j.div`
  position: absolute;
  top: 120px;
  display: flex;
  flex-direction: column;

  &.left {
    left: -12px;
  }

  &.right {
    right: -12px;
    top: 220px;
  }
`,tt=j.span`
  background-color: #1d1e1f;
  display: inline-block;
  width: 5px;
  min-height: 62px;
  border-radius: 2px;

  &.power {
    height: 102px;
  }

  &.volume-up {
    margin-top: 29px;
  }
  &.volume-down {
    margin-top: 16px;
  }

  &.lock {
    min-height: 32px;
  }
`,Si=()=>$.default.createElement(vi,null,$.default.createElement(Zn,{className:"left"},$.default.createElement(tt,{className:"lock"}),$.default.createElement(tt,{className:"volume-up"}),$.default.createElement(tt,{className:"volume-down"})),$.default.createElement(Zn,{className:"right"},$.default.createElement(tt,{className:"power"}))),Ei=()=>$.default.createElement(hi,null,$.default.createElement(yi,null)),Xn=({style:t,children:e})=>{let{isMobileDevice:r,isMobileNativePreview:n}=ce();return $.default.createElement(mi,{style:t,"data-testid":"mobile-preview-device"},$.default.createElement(Si,null),$.default.createElement(gi,{isMobileWeb:r&&!n},$.default.createElement(Ei,null),$.default.createElement(fi,{id:"engagement-mobile-preview-wrapper"},$.default.createElement("div",{id:"engagement-mobile-nudge-mock-pin"}),e),$.default.createElement(bi,null,$.default.createElement(wi,null))))};var xi=({children:t})=>{let e=he.default.useRef(null),{widgetTableauSelection:r,editorPreviewDevice:n}=U(),{mode:o}=J(),s=he.default.useCallback(u=>{if(!u){e.current&&(e.current.dispose(),e.current=null);return}if(e.current=(0,Jn.default)(u,{maxZoom:1,minZoom:1,initialZoom:1,zoomDoubleClickSpeed:1,smoothScroll:!1,filterKey:function(){return!0}}),e.current.on("pan",function(){document.body.style.cursor="grab",u.style.pointerEvents="none"}),e.current.on("panend",function(){document.body.style.cursor="auto",u.style.removeProperty("pointer-events")}),!!u.children[0])return u.addEventListener("mousedown",l),u.addEventListener("wheel",p),()=>{u.removeEventListener("mousedown",l),u.removeEventListener("wheel",p)}},[r]),l=u=>{var m,d;let h=u.target;(h==null?void 0:h.id)==="panzoom-container"?(m=e.current)==null||m.resume():(d=e.current)==null||d.pause()},p=u=>{var m,d;let h=u.target;(h==null?void 0:h.id)==="panzoom-container"?(m=e.current)==null||m.resume():(d=e.current)==null||d.pause()};return he.default.createElement("div",{style:{position:"absolute",inset:0,overflow:"clip",backgroundColor:o==="lightMode"?"#F9F9F9":"#3F424A",backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABZSURBVHgB7dG7DYBADANQJxexAiXSTXw9uyExBih34SOxQhr83Li2ASIiIiIiIvo7QbLW1jms1zijq9puSDaGLxhhuBPaqyKZTFK+/q6AZOJlg8shqv5ccAGZWRnaKiSy9QAAAABJRU5ErkJggg==)"}},he.default.createElement("div",{id:"panzoom-container",style:{width:"100%",height:"100%"},ref:s},t,he.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}},he.default.createElement(Xn,{style:{visibility:n.startsWith("mobile")?"visible":"hidden"}}))))},Qn=xi;f();var C=B(z()),Ht=B(or());f();var Ie=B(z());f();var eo=B(z());var ki={display:"flex",width:"var(--popover-width)",flexDirection:"column",alignItems:"flex-start",pointerEvents:"all",maxWidth:"var(--tooltip-max-width)",position:"relative",borderRadius:"var(--layout-radius-card)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--border-primary)",background:"var(--background-primary)",boxShadow:"var(--layout-shadow) var(--layout-shadow-color)",a:{color:"var(--content-link)",textDecoration:"none","&:hover":{color:"var(--content-link-hover)",textDecoration:"underline"}}},Ti={minWidth:"var(--popover-width)",width:"unset",maxWidth:"unset"},Ii=j.div``,Ci=eo.default.forwardRef(({children:t,title:e,variant:r,theme:n,...o},s)=>Ir(Ii,{ref:s,css:[ki,r==="survey"&&Ti].filter(Boolean),...o},t)),to=Ci;var ro=({nudge:t,step:e,renderMode:r,handleLinkClick:n,stepIndex:o,isVisible:s=!0})=>{let l=U(),p=J(),u=r!==1?G(l,t.variantId):void 0,{isMobileDevice:h}=ce(),c=Ie.default.createElement(An,{isDismissible:t.isDismissible,"data-testid":"engagement-nudge-tooltip-close"},Ie.default.createElement(En,null));return Ie.default.createElement(se,{nudge:t},Ie.default.createElement(to,{variant:e.content.find(m=>m.type==="survey_rating")?"survey":"default",key:e.id,theme:p,style:{minHeight:44,pointerEvents:s?"auto":"none",...e.formFactor.layout==="horizontal"&&!h?{width:"auto",maxWidth:"calc(var(--tooltip-max-width) * 2)"}:{}},className:"amplitude-engagement-tooltip-content"},Ie.default.createElement(Dn,{nudge:t,step:e,renderMode:r,handleLinkClick:n,stepIndex:o,actor:u,overrides:{close:c}})))};f();var no=B(z());var _i={bookClosed:hn,helpCircle:yn,helpSquare:bn,infoCircle:wn,lightBulb:vn,lightning:Sn},oo=({type:t,size:e=16})=>{let r=_i[t];return no.default.createElement(r,{color:"#3F424A",width:e,height:e})};f();var rt=B(z());var io=dn({types:{},guards:{shouldCenter:()=>!1,isInlineAligned:()=>!1},actions:{updatePosition:Lt({marker:({context:t},e)=>({...t.marker,position:e.position})}),assignInlineWrapper:Lt({inlineWrapperElement:(t,e)=>e.inlineWrapperElement}),removeTooltip:()=>{},trackMarkerInView:()=>{},handleHide:()=>{}},actors:{waitForTargetElement:te(()=>{}),trackTargetElement:te(()=>{}),wrapTargetElement:te(()=>{}),trackMarkerInView:te(()=>{})}}).createMachine({id:"Tooltip",initial:"idle",context:({input:t})=>({marker:{ref:t.markerRef,position:null,offset:t.offset,alignment:t.alignment},renderMode:t.renderMode,anchor:t.anchor}),states:{idle:{always:[{target:"centered",guard:"shouldCenter",description:"This is the case when we are editing a step in the studio and the target element is unavailable."},"waiting for target element"]},centered:{type:"final"},anchoring:{initial:"hidden",invoke:{src:"trackTargetElement",id:"trackTargetElement",input:({context:t,event:e})=>({marker:t.marker,targetElement:"targetElement"in e?e.targetElement:null})},states:{shown:{on:{HIDE:{target:"#Tooltip.anchoring.hidden"}},states:{visible:{entry:[{type:"trackMarkerInView"}],on:{OUT_OF_VIEW:"hidden"},exit:[{type:"handleHide"}]},hidden:{on:{IN_VIEW:"visible"}}},initial:"hidden",invoke:{src:"trackMarkerInView",id:"trackMarkerInView",input:({context:t})=>({markerRef:t.marker.ref})}},hidden:{on:{SHOW:"shown"}}},on:{POSITION:{actions:[{type:"updatePosition",params:({event:t})=>({position:t.position})}]},TARGET_ELEMENT_REMOVED:"waiting for target element"}},inlining:{invoke:{src:"wrapTargetElement",id:"wrapTargetElement",input:({context:t,event:e})=>({marker:t.marker,targetElement:"targetElement"in e?e.targetElement:null})},states:{idle:{on:{ASSIGN_WRAPPER:{target:"inlined",actions:[{type:"assignInlineWrapper",params:({event:t})=>({inlineWrapperElement:t.inlineWrapperElement})}]}}},inlined:{states:{hidden:{on:{IN_VIEW:"visible"}},visible:{entry:[{type:"trackMarkerInView"}],on:{OUT_OF_VIEW:"hidden"}}},initial:"hidden",invoke:{src:"trackMarkerInView",id:"trackMarkerInView",input:({context:t})=>({markerRef:t.marker.ref})}}},initial:"idle",on:{TARGET_ELEMENT_REMOVED:"waiting for target element"}},"waiting for target element":{on:{TARGET_ELEMENT_FOUND:[{target:"inlining",guard:"isInlineAligned"},"anchoring"]},invoke:{src:"waitForTargetElement",id:"waitForTargetElement"}}},on:{DESTROY:{actions:[{type:"removeTooltip"}]}}}),W=ln(io),so=({variantId:t,children:e,renderMode:r,offset:n,alignment:o,anchor:s,handleDestroy:l,onMarkerView:p,handleHide:u})=>{let{isEditorPreview:h}=U(),{showWidgetTableau:c,messageBus:m}=U(),d=(0,rt.useRef)(null),i=io.provide({guards:{shouldCenter:({context:a})=>!c&&h||r===1&&!xe(a.anchor),isInlineAligned:()=>o==="inline_left"||o==="inline_right"},actions:{removeTooltip:l,trackMarkerInView:p,handleHide:u},actors:{waitForTargetElement:te(({sendBack:a})=>{let y=xe(s);if(Le(y))return a({type:"TARGET_ELEMENT_FOUND",targetElement:y});let b=()=>{let g=xe(s);Le(g)&&a({type:"TARGET_ELEMENT_FOUND",targetElement:g})};return m.subscribe("dom_mutation",b,`tooltip_wait_for_target_${t}`),()=>{m.unsubscribe("dom_mutation",`tooltip_wait_for_target_${t}`)}}),trackTargetElement:te(({sendBack:a,input:y})=>{let{marker:b,targetElement:g}=y;if(!g)return;let w=b.ref.current;if(!w)return;let{offset:v,alignment:M}=b,D=xn(g,w,()=>{var K,F,oe,ue,Z,pe;In(g,w,{placement:M==="left"?"left":"right",strategy:"fixed",middleware:[kn({mainAxis:q(v.x),crossAxis:q(v.y)}),Tn({strategy:"escaped",padding:{top:q((K=v==null?void 0:v.y)!=null?K:"0"),bottom:-q((F=v==null?void 0:v.y)!=null?F:"0"),...M==="left"?{right:-q((oe=v==null?void 0:v.x)!=null?oe:"0"),left:q((ue=v==null?void 0:v.x)!=null?ue:"0")}:{right:q((Z=v==null?void 0:v.x)!=null?Z:"0"),left:-q((pe=v==null?void 0:v.x)!=null?pe:"0")}}})]}).then(({y:mt,x:ye,middlewareData:be})=>{var Ce;a({type:"POSITION",position:{x:ye,y:mt}}),(Ce=be.hide)!=null&&Ce.escaped?a({type:"HIDE"}):a({type:"SHOW"})})});return m.subscribe("dom_mutation",()=>{(!document.contains(g)||!Le(g))&&a({type:"TARGET_ELEMENT_REMOVED"})},`tooltip_check_for_target_removal_${t}`),()=>{D(),m.unsubscribe("dom_mutation",`tooltip_check_for_target_removal_${t}`)}}),wrapTargetElement:te(({sendBack:a,input:y})=>{var v,M;let{marker:b,targetElement:g}=y;if(!g)return;let w=document.createElement("div");return w.setAttribute("data-testid","engagement-nudge-tooltip-wrapper"),w.style.position="relative",w.style.display="inline-flex",w.style.alignItems="baseline",w.style.width="fit-content",w.style.flexDirection=b.alignment==="inline_right"?"row":"row-reverse",(v=g.parentNode)==null||v.insertBefore(w,g),(M=g.parentNode)==null||M.removeChild(g),w.appendChild(g),a({type:"ASSIGN_WRAPPER",inlineWrapperElement:w}),m.subscribe("dom_mutation",()=>{(!document.contains(g)||!Le(g))&&a({type:"TARGET_ELEMENT_REMOVED"})},`tooltip_check_for_target_removal_wrap_${t}`),()=>{let x=w.parentNode;document.contains(x)&&(x==null||x.insertBefore(g,w),x==null||x.removeChild(w)),m.unsubscribe("dom_mutation",`tooltip_check_for_target_removal_wrap_${t}`)}}),trackMarkerInView:te(({sendBack:a,input:y})=>{let b=new IntersectionObserver(([g])=>{g.isIntersecting?a({type:"IN_VIEW"}):a({type:"OUT_OF_VIEW"})});return y.markerRef.current&&b.observe(y.markerRef.current),()=>{b.disconnect()}})}});return rt.default.createElement(W.Provider,{logic:i,options:{input:{markerRef:d,offset:n,alignment:o,renderMode:r,anchor:s}}},e)};var Ai=({source:t,width:e})=>{let r=t.startsWith("<svg"),n=(0,C.useRef)(null),o={pointerEvents:"auto",...e!=null&&{width:e,height:e}},s={width:e!=null?"100%":"auto",height:e!=null?"100%":"auto",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"};return(0,C.useEffect)(()=>{if(r&&n.current){let l=n.current.querySelector("svg");l&&(e!=null?(l.style.width="100%",l.style.height="100%",l.style.maxWidth="100%",l.style.maxHeight="100%"):(l.style.width="auto",l.style.height="auto",l.style.maxWidth="none",l.style.maxHeight="none"))}},[r,t,e]),C.default.createElement("div",{style:o,className:"amplitude-engagement-tooltip-marker__image"},r?C.default.createElement("div",{ref:n,dangerouslySetInnerHTML:{__html:t},style:s,className:"svg-wrapper"}):C.default.createElement("img",{alt:"Tooltip marker",src:t,style:{width:e!=null?"100%":"auto",height:e!=null?"100%":"auto",objectFit:"contain"}}))},Mi=({type:t,width:e})=>C.default.createElement("div",{className:"amplitude-engagement-tooltip-marker__icon","data-testid":"engagement-nudge-tooltip-icon",style:{border:"none",display:"flex",background:"none",padding:0,position:"relative",pointerEvents:"auto"}},C.default.createElement(oo,{type:t,size:e!=null?e:void 0})),Ni=({marker:t,className:e})=>{let r=J(),{isMobileNativePreview:n}=ce();switch(t.type){case"image":return t.source?C.default.createElement(Ai,{source:t.source,width:n?16:t.width}):null;case"icon":return C.default.createElement(Mi,{type:t.icon,width:t.width});case"beacon":return C.default.createElement(Pn,{theme:r,className:"amplitude-engagement-tooltip-marker__beacon"});default:return null}},Pi=({step:t})=>{let{isMobileDevice:e}=ce(),r=W.useSelector(a=>a.matches({anchoring:"shown"})||a.matches("centered")),n=W.useSelector(({context:a})=>a.marker.alignment),o=n==="inline_left"||n==="left",s={visibility:r?"visible":"hidden",top:"calc(40vh - 51px)",right:`calc(-${e?o?40:60:o?20:80}vw + 24px)`},l=W.useSelector(({context:a})=>{var y;return(y=a.marker.position)==null?void 0:y.y}),p=W.useSelector(({context:a})=>{var y;return(y=a.marker.position)==null?void 0:y.x}),u={visibility:r?"visible":"hidden",left:p,top:l},h={visibility:"visible"},c=W.useSelector(a=>a.matches({inlining:"inlined"})&&!!a.context.inlineWrapperElement),m=W.useSelector(a=>a.matches("centered")),d=()=>c?h:m?s:u,i=W.useSelector(({context:a})=>a.marker.ref);return C.default.createElement(Cn,{ref:i,"data-testid":"engagement-nudge-tooltip-marker",style:{...d()}},C.default.createElement(Ni,{marker:t.formFactor.marker,className:"amplitude-engagement-tooltip-marker"}))},Oi=({nudge:t,step:e,popoverActor:r})=>{var i,a,y;let n=Ee(r,b=>b.matches("open")),{onExit:o}=Xe(),{isStudioMobilePreview:s}=ce(),l=U(),p=W.useSelector(({context:b})=>b.renderMode),u=p!==1?G(l,t.variantId):void 0,h=(a=(i=u==null?void 0:u.getSnapshot())==null?void 0:i.context.stepIndex)!=null?a:0,c=(0,C.useCallback)(()=>o(()=>{var b,g;return(g=(b=u==null?void 0:u.getSnapshot())==null?void 0:b.context.popoverActor)==null?void 0:g.send({type:"CLOSE"})}),[u==null?void 0:u.getSnapshot,o]),m=On(b=>Re.nudge.engaged(t,h,{...u==null?void 0:u.getSnapshot().context,source:{type:"link",url:b},interactionState:ee(l,t.variantId)}),c),d=W.useSelector(b=>b.matches({inlining:"inlined"})&&!!b.context.inlineWrapperElement);return(0,C.useEffect)(()=>{u==null||u.send({type:"ASSIGN_POPOVER_ACTOR",actor:r})},[r,u]),(0,C.useEffect)(()=>{p===1&&r.send({type:"OPEN"})},[p,e]),C.default.createElement(C.default.Fragment,null,C.default.createElement(Pi,{step:e}),C.default.createElement(_n,{"data-testid":"engagement-nudge-tooltip-content",describedBy:"engagement-nudge-tooltip-content",labelledBy:"engagement-nudge-title",portalToId:s?"engagement-mobile-preview-wrapper":d?"engagement-toast-container":void 0,shouldStealFocus:p!==1,showArrow:((y=e.formFactor.pointer)==null?void 0:y.type)==="arrow",style:{borderRadius:"var(--layout-radius-card)",...Oe.getZIndexStyles(e)}},C.default.createElement(Rn,{actor:u,step:e},C.default.createElement(Nn,null,C.default.createElement(ro,{nudge:t,step:e,renderMode:p,stepIndex:h,handleLinkClick:m,isVisible:n})))))},Ri=({nudge:t,step:e,onOpen:r,forceOpen:n=!1,autoPlacement:o=!0,root:s})=>{let l=W.useSelector(({context:b})=>b.renderMode),p=W.useSelector(b=>b.matches("idle")),u=W.useSelector(b=>b.matches({inlining:"inlined"})&&!!b.context.inlineWrapperElement),h=W.useSelector(({context:b})=>b.inlineWrapperElement),c=W.useSelector(({context:b})=>b.marker.offset),{generatedCSSClassname:m}=J();if(p)return null;let[d,i]=[q(c.x),q(c.y)],a=u?{display:"flex",position:"relative",[e.formFactor.marker.positioning.position==="inline_left"?"marginRight":"marginLeft"]:`${d}px`,marginTop:`${i}px`,zIndex:"auto"}:{...Oe.getZIndexStyles(e)};if(!s)return null;let y=(0,Ht.createPortal)(C.default.createElement(Mn,{"data-testid":`engagement-tooltip-${t.variantId}-${String(e.id)}${l===1?"-mock":""}`,forceOpen:n,defaultOpen:l===1,triggerType:e.formFactor.showOn,style:a,className:m,autoPlacement:o,onOpen:r},b=>C.default.createElement(Oi,{nudge:t,step:e,popoverActor:b})),s);return u&&h?(0,Ht.createPortal)(y,h):y},ao=({nudge:t,step:e,renderMode:r,forceOpen:n,anchorOverride:o,onMarkerView:s,onOpen:l,handleDestroy:p,autoPlacement:u})=>{var m;let h=U(),c=(0,C.useRef)(document.getElementById("engagement-tooltip-container-portal"));return c.current?C.default.createElement(se,{nudge:t},C.default.createElement(fn,{widget:"tooltip",keepMounted:!0,isOpenByDefault:r===1},C.default.createElement(so,{variantId:t.variantId,offset:e.formFactor.marker.positioning.offset,renderMode:r,alignment:e.formFactor.marker.positioning.position,anchor:(m=o!=null?o:e.formFactor.anchorSelector)!=null?m:e.formFactor.anchor,handleDestroy:p,onMarkerView:s,handleHide:()=>{var a;let d=G(h,t.variantId),i=(a=d==null?void 0:d.getSnapshot())==null?void 0:a.context.popoverActor;i==null||i.send({type:"CLOSE"})}},C.default.createElement(Ri,{onOpen:l,autoPlacement:u,forceOpen:n,nudge:t,step:e,root:c.current})))):null};var Bi=S.default.lazy(()=>import("./e94e472bb4310523682452ee5a3c92409df51b60-Checklist-WNUPOWCH.js")),Li=S.default.lazy(()=>import("./e94e472bb4310523682452ee5a3c92409df51b60-Nudges-RJSND3DE.js")),Ui=S.default.lazy(()=>import("./e94e472bb4310523682452ee5a3c92409df51b60-WidgetTableau-MRHNPCR6.js")),Fi=S.default.lazy(()=>import("./e94e472bb4310523682452ee5a3c92409df51b60-ResourceCenterRoot-ACHWUOI7.js")),$i=()=>{let t=U(),{generatedCSSClassname:e}=J(),r=()=>S.default.createElement(S.default.Fragment,null,S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(Li,null)),t.nudgesManager&&S.default.createElement(Vn,{nudgesManager:t.nudgesManager}),S.default.createElement(cn,{containerStyle:{marginTop:t.isEditorPreview?"51px":void 0}}),S.default.createElement("div",{id:"engagement-tooltip-container-portal"}),S.default.createElement(Yn,null)),n=()=>S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(Bi,null)),o=s=>{var l,p;return t.resourceCenter?S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(Fi,{isEnabled:!!t.resourceCenter.key&&!!((p=(l=t.decide)==null?void 0:l[t.resourceCenter.key])!=null&&p.value),isPreviewPane:s,isVisible:t.resourceCenter.visible,launcher:t.resourceCenter.desktopLauncher})):null};return S.default.createElement("div",{className:e,id:"engagement-theme-root",dir:"ltr"},t.showWidgetTableau?S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(Ui,null)):t.isEditorPreview?S.default.createElement(Qn,null,n(),r(),o(!0)):S.default.createElement(S.default.Fragment,null,n(),r(),o(!1)))},Ki=({children:t})=>{var p,u,h;let e=U(),{organization:r}=e,n=(0,S.useRef)(!!e.user),o=document.getElementById("engagement-wrapper"),s=zn(o!=null?o:document.head),l=(0,S.useMemo)(()=>{var d,i;let c=me(),m=a=>{if(a.type!=="rule")return;let y="#engagement-wrapper";Array.isArray(a.props)?a.props=a.props.map(b=>b&&b.includes(".")?`${y} ${b}`:b):typeof a.props=="string"&&a.props.includes(".")&&(a.props=`${y} ${a.props}`)};return Wn({key:"engagement-toplevel",container:s,speedy:!((d=e.flags)!=null&&d["support-ruby-on-rails"]),nonce:(i=c[O])==null?void 0:i.nonce,stylisPlugins:[m]})},[s,(p=e.flags)==null?void 0:p["support-ruby-on-rails"]]);return(0,S.useEffect)(()=>{$n.setOrganization(r)},[r]),S.default.useEffect(()=>{e.user&&(e.services.postMessageToDashboard("ENGAGEMENT_BOOTED"),n.current||(n.current=!0))},[(u=e.user)==null?void 0:u.device_id,(h=e.user)==null?void 0:h.user_id,r]),S.default.useEffect(()=>{let c=setTimeout(()=>{n.current||E.warn("\u{1F44B} Guides and Surveys are almost ready. You just need to call `boot()` to make them available in your app.")},15e3);return()=>clearTimeout(c)},[]),S.default.createElement(S.default.Fragment,null,S.default.createElement(Tr,{value:l},e.user?S.default.createElement($i,null):null,t))},Hi=t=>{let e=U(),r=jn(e),n={container:document.getElementById("engagement-container"),root:document};return S.default.createElement(_r.Provider,{value:n},S.default.createElement(Mr,{theme:r.theme,mode:r.mode},S.default.createElement(Ki,{...t})))},co=Hi;var lo=t=>nt.default.createElement(ar,null,nt.default.createElement(cr,{store:t.store},nt.default.createElement(co,null,t.children)));f();f();var ot=(t,e)=>{let r={};return Object.keys(e).forEach(n=>{r[n]=e[n].bind(null,t)}),r};var Wt={};ti(Wt,{previewAutopilotKeywords:()=>go,previewContentItem:()=>fo,previewRecSet:()=>po,previewResourceCenter:()=>mo,setInitialPage:()=>ho,showResourceCenter:()=>uo});f();f();var uo=(t,e)=>{t.services.showResourceCenter(t,e)},po=(t,e)=>{t.services.previewRecSet(t,e)},mo=(t,e,r)=>{t.services.previewResourceCenter(t,e,r)},go=(t,e)=>{t.services.previewAutopilotKeywords(t,e)},fo=(t,e)=>{t.services.setCurrentContentId(t,e)},ho=(t,e)=>{t.resourceCenter.initialPage=e};f();var Wi=t=>{var e,r,n,o;return typeof window>"u"||typeof document>"u"?t:{...t,event_properties:{...t.event_properties,"[Guides-Surveys] Page":{domain:(e=window.location)==null?void 0:e.hostname,hash:(r=window.location)==null?void 0:r.hash,path:(n=window.location)==null?void 0:n.pathname,query:(o=window.location)==null?void 0:o.search,title:document.title}}}},zi=t=>({...t,event_properties:{...t.event_properties,"[Guides-Surveys] Version":"1"}}),Vi=t=>(t=zi(t),t=Wi(t),t),it=class{constructor(e){L(this,"hasBooted",!1);L(this,"integrations");this.integrations=e}trackEvent(e,r={}){this.track(e,r)}track(e,r={}){var o,s;let n={event_type:e,event_properties:r};if(!this.hasBooted){E.warn("Events cannot be tracked before `boot` is called");return}try{let l=Vi(n);E.debug("Tracking event",JSON.stringify(l,null,2));try{this.integrations().forEach(p=>{var u;(u=p.track)==null||u.call(p,{event_type:l.event_type,event_properties:l.event_properties})})}catch(p){(o=Q())==null||o.captureException(p)}}catch(l){E.error("Unexpected error logging event; ignoring",{error:l}),(s=Q())==null||s.captureException(l)}}setBootStatus(e){this.hasBooted=e}};f();var ji=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:qi(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),qi=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},Gi=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(r){e(r)}),this.queue=[])},t}(),le=function(){return le=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},le.apply(this,arguments)};function st(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yo(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],l;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(p){l={error:p}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return s}var at=function(t,e){var r,n,o=["string","number","boolean","undefined"],s=typeof t,l=typeof e;if(s!==l)return!1;try{for(var p=st(o),u=p.next();!u.done;u=p.next()){var h=u.value;if(h===s)return t===e}}catch(b){r={error:b}}finally{try{u&&!u.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var c=Array.isArray(t),m=Array.isArray(e);if(c!==m)return!1;if(c&&m){for(var d=0;d<t.length;d++)if(!at(t[d],e[d]))return!1}else{var i=Object.keys(t).sort(),a=Object.keys(e).sort();if(!at(i,a))return!1;var y=!0;return Object.keys(t).forEach(function(b){at(t[b],e[b])||(y=!1)}),y}return!0},Yi="$set",Zi="$unset",Xi="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),r=e.length,n=new Array(r);r--;)n[r]=[e[r],t[e[r]]];return n});var Ji=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,r=le({},this.identity.userProperties),n=le(le({},this.identity),{userProperties:r});return{setUserId:function(o){return n.userId=o,this},setDeviceId:function(o){return n.deviceId=o,this},setUserProperties:function(o){return n.userProperties=o,this},setOptOut:function(o){return n.optOut=o,this},updateUserProperties:function(o){var s,l,p,u,h,c,m=n.userProperties||{};try{for(var d=st(Object.entries(o)),i=d.next();!i.done;i=d.next()){var a=yo(i.value,2),y=a[0],b=a[1];switch(y){case Yi:try{for(var g=(p=void 0,st(Object.entries(b))),w=g.next();!w.done;w=g.next()){var v=yo(w.value,2),M=v[0],x=v[1];m[M]=x}}catch(F){p={error:F}}finally{try{w&&!w.done&&(u=g.return)&&u.call(g)}finally{if(p)throw p.error}}break;case Zi:try{for(var D=(h=void 0,st(Object.keys(b))),K=D.next();!K.done;K=D.next()){var M=K.value;delete m[M]}}catch(F){h={error:F}}finally{try{K&&!K.done&&(c=D.return)&&c.call(D)}finally{if(h)throw h.error}}break;case Xi:m={};break}}}catch(F){s={error:F}}finally{try{i&&!i.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return n.userProperties=m,this},commit:function(){return e.setIdentity(n),this}}},t.prototype.getIdentity=function(){return le({},this.identity)},t.prototype.setIdentity=function(e){var r=le({},this.identity);this.identity=le({},e),at(r,this.identity)||this.listeners.forEach(function(n){n(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t}(),$e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:self,ct=function(){function t(){this.identityStore=new Ji,this.eventBridge=new Gi,this.applicationContextProvider=new ji}return t.getInstance=function(e){return $e.analyticsConnectorInstances||($e.analyticsConnectorInstances={}),$e.analyticsConnectorInstances[e]||($e.analyticsConnectorInstances[e]=new t),$e.analyticsConnectorInstances[e]},t}();f();var dt=["boot"],bo=["boot"],zt="$default_instance";function wo(t){var o,s,l,p,u,h,c,m;let e=window.engagement,r={_q:(o=e==null?void 0:e._q)!=null?o:[],_configuration:{apiKey:(l=(s=e==null?void 0:e._configuration)==null?void 0:s.apiKey)!=null?l:"",serverUrl:(p=e==null?void 0:e._configuration)==null?void 0:p.serverUrl,chatUrl:(u=e==null?void 0:e._configuration)==null?void 0:u.chatUrl,serverZone:(c=(h=e==null?void 0:e._configuration)==null?void 0:h.serverZone)!=null?c:"US",options:{...(m=e==null?void 0:e._configuration)==null?void 0:m.options}},_sentry:void 0,init(d,i){var w,v,M;if(r._configuration.apiKey){console.log("Engagement SDK has already been initialized. Ignoring additional init call.");return}r._configuration={...r._configuration,...i,apiKey:d,options:{splitting:!0,...r._configuration.options,...i==null?void 0:i.options}},(v=(w=r._configuration)==null?void 0:w.options)!=null&&v.logger&&r._configuration.options.logger.enable((M=r._configuration.options.logLevel)!=null?M:2);let a;if(i!=null&&i.cdnUrl)r._configuration.options.splitting?a=`${i.cdnUrl}/engagement-browser/prod/split/index.js`:a=i.cdnUrl+"/engagement-browser/prod/index.min.js.gz";else{let x=r._configuration.serverZone==="EU"?"https://cdn.eu.amplitude.com":"https://cdn.amplitude.com";r._configuration.options.splitting?a=`${x}/engagement-browser/prod/split/index.js`:a=`${x}/engagement-browser/prod/index.min.js.gz`}let y=null,b=()=>{if(y&&(clearTimeout(y),y=null),r._q&&r._q.length>0)for(console.warn(`Engagement SDK failed to load within ${g}ms. Resolving pending calls gracefully.`);r._q.length>0;){let x=r._q.shift();if(!x)continue;let D=x[0];if(dt.includes(D)&&x[1]instanceof Function&&x[2]instanceof Function){let K=x[1];console.warn(`Engagement SDK method '${D}' resolved as no-op due to script loading failure`),K(void 0)}}};t(a,r._configuration.options.splitting?"module":void 0,i==null?void 0:i.nonce,b);let g=1e4;y=setTimeout(()=>{b()},g)},plugin(d){let i=r.init;return{name:"@amplitude/engagement-browser",type:"enrichment",async setup(a,y){var v,M;let b=(v=a.instanceName)!=null?v:zt,g=ct.getInstance(b).identityStore;i(a.apiKey,{serverZone:a.serverZone,serverUrl:(M=a.serverUrl)!=null&&M.includes("amplitude.com")?void 0:a.serverUrl,...d,options:{logLevel:a.logLevel,logger:a.loggerProvider,...d==null?void 0:d.options}});let w=[{track:x=>{y.track(x)}}];await window.engagement.boot({user:()=>{let x=g.getIdentity();return{user_id:y.getUserId(),device_id:y.getDeviceId(),user_properties:x.userProperties,getSessionId:y.getSessionId}},integrations:w}),g.addIdentityListener(x=>{var D,K,F,oe;(((K=(D=window.engagement)==null?void 0:D._.user)==null?void 0:K.user_id)!==x.userId||((oe=(F=window.engagement)==null?void 0:F._.user)==null?void 0:oe.device_id)!==x.deviceId)&&window.engagement.boot({user:()=>{let ue=g.getIdentity();return{user_id:y.getUserId(),device_id:y.getDeviceId(),user_properties:ue.userProperties,getSessionId:y.getSessionId}},integrations:w}),window.engagement._setUserProperties(x.userProperties)})},async execute(a){return window.engagement.forwardEvent(a),a}}}},n=r;return new Proxy(r,{get:function(d,i){if(i in n)return n[i];if(i!=="then")return i==="gs"||i==="rc"?new Proxy({},{get:function(a,y){return function(){let b=Array.from(arguments),g=`${i}.${y}`;b.unshift(g),r._q.push(b)}}}):dt.includes(i)?function(){let a=Array.prototype.slice.call(arguments);return new Promise((y,b)=>{a.unshift(i,y,b),r._q.push(a)})}:function(){let a=Array.prototype.slice.call(arguments);a.unshift(i),r._q.push(a)}}})}var Qi=["reloadOrganization","reloadNudges","reloadThemes"],es={},lt=class{constructor(e,r){L(this,"_");L(this,"nudgeActions");L(this,"resourceCenterActions");L(this,"globalActions");L(this,"_analytics",new it(()=>this._.integrations));L(this,"_configuration",{serverZone:"US",serverUrl:void 0,apiKey:"",options:{...es}});L(this,"_initStarted",!1);L(this,"_isProxy",!1);L(this,"_fingerprint");L(this,"_sentry");L(this,"transformForHeadless",e=>e.map(r=>{var o,s,l,p,u,h,c,m,d,i,a;let n=JSON.parse(JSON.stringify(r));return(o=n.lifecycleConfig)!=null&&o.conditions&&delete n.lifecycleConfig.conditions,(s=n.pageTargeting)!=null&&s.conditions&&delete n.pageTargeting.conditions,(l=n.temporarilyHideTargeting)!=null&&l.conditions&&delete n.temporarilyHideTargeting.conditions,(u=(p=n.lifeCycleState)==null?void 0:p.checks)!=null&&u.sessionProperties&&delete n.lifeCycleState.checks.sessionProperties,(i=(d=(m=(c=(h=n.lifeCycleState)==null?void 0:h.checks)==null?void 0:c.limits)==null?void 0:m.detail)==null?void 0:d.limits)!=null&&i.conditions&&delete n.lifeCycleState.checks.limits.detail.limits.conditions,((a=n.lifeCycleState)==null?void 0:a.willRenderIfTriggered)!==void 0&&(n.lifeCycleState.passesAllChecks=n.lifeCycleState.willRenderIfTriggered,delete n.lifeCycleState.willRenderIfTriggered),n}));L(this,"gs",{reset:(e,r)=>{let n=Nt(this._,e);if(!n){E.warn(`gs.reset: Guide or survey with flagKey: ${e} not found`);return}this.nudgeActions.resetNudge(n==null?void 0:n.variantId,{step:r})},getAllGuidesAndSurveys:(e,r=[])=>{var s;let n=ae(this._);if(!n)return[];let o=[];for(let l of n.values()){let p=l.getSnapshot().context.nudge,u=ee(this._,p.variantId),h=l.getSnapshot().matches({Step:"Render Loop"}),c=!!(u!=null&&u.activelifeCycleUuid),m=Xr(this._,p,r),d={activelifeCycleUuid:(u==null?void 0:u.activelifeCycleUuid)||"",currentStep:(u==null?void 0:u.currentStep)||0,isCompleted:(u==null?void 0:u.isCompleted)||!1,isDismissed:(u==null?void 0:u.isDismissed)||!1,isChecklistExpanded:(s=u==null?void 0:u.isChecklistExpanded)!=null?s:!0,steps:(u==null?void 0:u.steps)||{},shouldShow:h||c,checks:(m==null?void 0:m.checks)||{},willRenderIfTriggered:(m==null?void 0:m.willRenderIfTriggered)||!1};e!=null&&e.onlyEligible&&!d.willRenderIfTriggered||e!=null&&e.variantIds&&!e.variantIds.includes(p.variantId)||o.push({...p,lifeCycleState:d})}return this.transformForHeadless(o)},getPreviewGuideOrSurvey:async e=>{var s,l;let r=(s=me())==null?void 0:s[O],n=await qr(r==null?void 0:r.apiKey);n!=null&&n.nudges&&await((l=me())==null?void 0:l._reloadNudges(n));let o=this.gs.getAllGuidesAndSurveys({variantIds:[e]},["userTargeting"])[0];return o.lifeCycleState.checks.userTargeting={result:"PASS",explanation:"User targeting always passes in preview mode",detail:{userTargeting:o.flagKey}},o.lifeCycleState.willRenderIfTriggered=Object.values(o.lifeCycleState.checks).every(({result:p})=>p==="PASS"),o},list:()=>{let e=[],r=ae(this._);if(!r)return e;for(let n of r.values()){let o=n.getSnapshot().context.nudge,s=ee(this._,o.variantId),l=n.getSnapshot().matches({Step:"Render Loop"});!(s!=null&&s.activelifeCycleUuid)&&!l||e.push({id:o.variantId,step:s==null?void 0:s.currentStep,title:o.title,status:l?"visible":"active",key:o.flagKey})}return e},show:(e,r=0)=>{let n=Nt(this._,e);n?(this.nudgeActions.closeAllNudgeMocks(),this.nudgeActions.forceTriggerSingleNudge(n,{source:{type:"sdk"},overrides:{stepIndex:r}})):E.error(`triggerNudge: Nudge with key: ${e} not found`)},closeAll:()=>{var e;(e=ae(this._))==null||e.forEach(r=>{r==null||r.send({type:"DISMISS"})})}});L(this,"rc",{open:()=>{this.resourceCenterActions.showResourceCenter(!0)},close:()=>{this.resourceCenterActions.showResourceCenter(!1)},toggle:()=>{this.resourceCenterActions.showResourceCenter(!this._.resourceCenter.visible)}});var n,o;this._=e,this.nudgeActions=ot(e,Ze),this.resourceCenterActions=ot(e,Wt),this.globalActions=ot(e,Vr),this.setRouter=this.setRouter.bind(this),this.boot=this.boot.bind(this),this._startNudgeDebug=this._startNudgeDebug.bind(this),this.forwardEvent=this.forwardEvent.bind(this),this.addIntegration=this.addIntegration.bind(this),this.setThemeMode=this.setThemeMode.bind(this),this.addCallback=this.addCallback.bind(this),this.setSessionProperty=this.setSessionProperty.bind(this),this._initStarted=((n=window.engagement)==null?void 0:n._initStarted)===!0,this._configuration={...this._configuration,...r,options:{...this._configuration.options,...r.options}},this._configuration.options.logger&&this._configuration.options.logger.enable((o=this._configuration.options.logLevel)!=null?o:2),this._sentry=Nr("https://86e449af9e7145de4804c2143988499b@o13027.ingest.us.sentry.io/4508580659462144")}init(e,r){var n;if(this._configuration.apiKey){E.warn("Engagement SDK has already been initialized. Ignoring additional init call.");return}this._configuration={...this._configuration,apiKey:e,...r,options:{...this._configuration.options,...r==null?void 0:r.options}},this._configuration.options.logger&&this._configuration.options.logger.enable((n=this._configuration.options.logLevel)!=null?n:2)}plugin(e){return{name:"@amplitude/engagement-browser",type:"enrichment",setup:async(o,s)=>{var u;let l=(u=o.instanceName)!=null?u:zt,p=ct.getInstance(l).identityStore;await this.boot({user:()=>{let h=p.getIdentity();return{user_id:s.getUserId(),device_id:s.getDeviceId(),user_properties:h.userProperties,getSessionId:s.getSessionId}},integrations:[{track:h=>{s.track(h)}}]}),p.addIdentityListener(h=>{this._setUserProperties(h.userProperties)})},execute:async o=>(this.forwardEvent(o),o)}}setRouter(e){this.globalActions.addCallbacks({"engagement-router":e})}async updateLanguage(e){var o;this._configuration&&(this._configuration.locale=e);let n=(await fe(this._configuration.apiKey)).nudges;(o=ae(this._))==null||o.forEach(s=>{let l=n.find(p=>p.variantId===s.getSnapshot().context.nudge.variantId);l&&(s==null||s.send({type:"REFRESH_NUDGE",nudge:l}))})}async decide(){if(!this._.user){E.error("User must be set before calling decide");return}if(!this._configuration.apiKey){E.error("API key must be set before calling decide");return}return this._.decide=await jr.decide(this._configuration.apiKey,this._.user,this._.isEditorPreview),this._.decide}async boot(e){var r,n,o,s;if(typeof e.user=="function")try{this._.user=e.user()}catch(l){E.error("Failed to get user from provider function",l)}else typeof e=="string"?this._.user={user_id:e}:typeof e.user=="string"?this._.user={user_id:e.user}:this._.user=e.user;if(!this._.user||!this._.user.user_id&&!this._.user.device_id){E.error("User must specify at least a user_id or device_id"),this._.user=void 0;return}this._.user=this._.services.enrichUser(this._.user),this._.integrations=[],(r=e.integrations)==null||r.forEach(l=>{this.addIntegration(l)}),E.log("booting...",JSON.stringify(this._.user,null,2));try{await this.decide(),E.debug("Decide data fetched successfully")}catch(l){E.error("Failed to fetch decide data",l),(n=Q())==null||n.captureException(l)}try{await this._.endUserStore.fetchData(),this._.endUserStore.initializedSuccessfully&&(this._analytics.setBootStatus(!0),(o=this._.nudgesManager)==null||o.send({type:"END_USER_STORE_LOADED"}),E.debug("End user state loaded successfully"))}catch(l){E.error("Failed to fetch end user state",l),(s=Q())==null||s.captureException(l)}}forwardEvent(e){typeof e=="string"&&(e={event_type:e}),E.debug(`Registering event ${e.event_type}`),zr(this._,e.event_type,e.event_properties)}addIntegration(e){this._.integrations.push(e)}setThemeMode(e){["lightMode","darkMode","auto"].includes(e)&&(this._.themeMode=e)}addCallback(e,r){this.globalActions.addCallbacks({[e]:r})}setSessionProperty(e,r){if(!Or(e)){console.error("Invalid session property key",e);return}if(!Rr(r)){console.error("Invalid session property value",r);return}this.globalActions.setSessionProperties({[e]:r})}registerAction(e,r){let n=Mt(this._,e);if(!n){E.warn(`registerAction: Guide or survey with variantId: ${e} not found`);return}if(r.type==="show")this.nudgeActions.forceTriggerSingleNudge(n,{source:{type:"sdk"}});else if(r.type==="dismiss")De(this._,n,0);else if(r.type==="snooze")Yr(this._,n,n.snoozeDuration,0);else if(r.type==="ctaClick"){let o=G(this._,e),s=ee(this._,e),l=(s==null?void 0:s.currentStep)||0,p=n.steps[l];if(!p){E.error(`registerAction: Step ${l} not found for nudge ${e}`);return}let u=p.content.find(m=>{var d;return m.type==="button"&&((d=m.meta)==null?void 0:d.buttonType)===r.buttonType});if(!u){E.error(`registerAction: No button with type ${r.buttonType} found in step ${l}`);return}r.surveyResponse&&(o==null||o.send({type:"UPDATE_SURVEY_RESPONSE",surveyResponse:r.surveyResponse}));let h=u.meta,c=Lr(p,{buttonMeta:h,surveyResponse:r.surveyResponse});Jr(this._,c,h,0,o)}else E.error(`registerAction: Invalid action type "${r.type}". Must be "show", "dismiss", "snooze", or "ctaClick"`)}async _configUser(){var p;(p=Q())==null||p.addBreadcrumb({level:"debug",category:"internal",message:"_configUser called"});let{organization:e,nudges:r,flags:n,themes:o,resourceCenters:s}=await fe(this._configuration.apiKey,this._.isEditorPreview);this._.flags=n,this._.themes=o;let[l]=s;l&&(this._.resourceCenter={...this._.resourceCenter,...l}),this.globalActions.setOrganization(e),this.nudgeActions.initNudges(r||[]),this.nudgeActions.setupTimedTriggers([...r])}_updateEditorPreviewDevice(e){this._.editorPreviewDevice=e}_getEditorPreviewDevice(){return this._.editorPreviewDevice}async _reload(e=Qi){let r=await fe(this._configuration.apiKey,this._.isEditorPreview);for(let n of e){let s=this[n];s instanceof Function&&s(r)}}async _reloadOrganization(e){let{organization:r}=e||await fe(this._configuration.apiKey,this._.isEditorPreview);this.globalActions.setOrganization(r)}async _reloadNudges(e){let{nudges:r}=e||await fe(this._configuration.apiKey,this._.isEditorPreview);this.nudgeActions.initNudges(r||[])}async _reloadThemes(e){let{themes:r}=e||await fe(this._configuration.apiKey,this._.isEditorPreview);this._.themes=r}_startNudgeDebug(e){let{nudge:r}=e;this.nudgeActions.closeAllNudgeMocks(),this.nudgeActions.startDebugSession(r,{refreshDecide:!0,toStepIndex:0})}async _stopNudgeDebug(){this.nudgeActions.stopDebugSession()}_showNudgeStepMock(e){var r;(r=ae(this._))==null||r.forEach(n=>{n==null||n.send({type:"CLOSE"})}),this.nudgeActions.showStepMock(e.nudge,e.stepIndex,{forceOpen:e.forceOpen})}_closeNudgeMocks(){this.nudgeActions.closeAllNudgeMocks()}_setUserProperties(e){if(!this._.user){E.error("User is undefined, likely hasn't been booted yet");return}this._.user.user_properties={...this._.user.user_properties,...e}}_shareConfig(){return{organization:this._.organization||void 0,nudges:Se(this._)}}_shareTrackedEvents(){return{trackedEvents:[...this._.trackedAppEvents]}}_startDebug(){X.set("debug:nudges","true"),E.log("Enabled debugging for nudges. Restart the application.")}_stopDebug(){X.remove("debug:nudges"),E.log("Disabled debugging for nudges. Restart the application.")}_showResourceCenter(e,r){this.resourceCenterActions.showResourceCenter(e),(r==null?void 0:r.recSet)!==void 0&&this.resourceCenterActions.previewRecSet(r.recSet),r!=null&&r.resourceCenter&&(r==null?void 0:r.quickLinks)!==void 0&&this.resourceCenterActions.previewResourceCenter(r.resourceCenter,r.quickLinks),(r==null?void 0:r.autopilotKeywords)!==void 0&&this.resourceCenterActions.previewAutopilotKeywords(r.autopilotKeywords),(r==null?void 0:r.contentItemId)!==void 0&&this.resourceCenterActions.previewContentItem(r.contentItemId)}_startChat(){this.resourceCenterActions.setInitialPage({item:{page:"assistant",params:{}}}),this.resourceCenterActions.showResourceCenter(!0)}async _getDebugSnapshot(e){if(e!=null&&e.variantId){if(typeof e.variantId=="number"){let n=Mt(this._,e.variantId);if(n){let o=typeof e.stepIndex=="number"?e.stepIndex:0,s=await Rt(this._,n,o),{name:l}=_t(n),p=`${l} debug snapshot: ${s.guideOrSurvey.title} - ${s.guideOrSurvey.variant}`;console.log(p,s)}}return}let r=Se(this._);for(let n of r){let o=await Rt(this._,n),{name:s}=_t(n),l=`${s} debug snapshot: ${o.guideOrSurvey.title} - ${o.guideOrSurvey.variant}`;console.log(l,o)}}_debugStatus(){console.log({user:this._.user,apiKey:this._configuration.apiKey,stateInitialized:this._.endUserStore.initializedSuccessfully,decideSuccessful:this._.decide!=null,num_guides_surveys:Se(this._).length,analyticsIntegrations:this._.integrations.length})}_setTheme(e,r){e||(this._.themeOverride=void 0),this._.themeOverride={theme:e,mode:r}}_showWidgetTableau(e,r){this._.widgetTableauSelection=r,this._.showWidgetTableau=e}_addCallback(e,r){this.globalActions.addCallbacks({[e]:r})}_clearNudgeInteractions(e){e?this._.endUserStore.data={nudgeInteractions:{...this._.endUserStore.data.nudgeInteractions,[e]:It()}}:this._.endUserStore.data={nudgeInteractions:Object.fromEntries(Object.keys(this._.endUserStore.data.nudgeInteractions).map(r=>[r,It()]))},this._.endUserStore.pushData()}};f();var vo=async(t,e)=>{let r=(p,u)=>{let h=u.split("."),c=p;for(let m of h){if(!(m in c)){E.warn(`Engagement SDK method ${u} is not defined.`);return}c=c[m]}return c},n=async p=>{let u=[...p],h=u.shift(),c=r(t,h);if(c)if(dt.includes(h))if(u[0]instanceof Function){let m=u.shift(),d=u.shift();try{await c(...u).then(m,d)}catch(i){E.error(i)}}else await c(...u);else await c(...u)},s=(async p=>{do{let u=e.findIndex(c=>(c==null?void 0:c[0])===p);if(u===-1)break;let h=e.splice(u,1)[0];await n(h)}while(!0)})("boot"),l=[];for(;e.length>0;){let p=e.shift();if(!p)continue;let u=p[0];if(u==="boot"){l.push(p);continue}bo.includes(u)?await n(p):n(p)}return e.length=0,s.then(async()=>{for(let p=0;p<l.length;p++){let u=l[p];await n(u)}}),t};f();var ts=4,rs=500,ns=500,So=t=>{let e,r=0,n=0,o=()=>{let s=Date.now();s-n<=ns&&(r+=1,clearTimeout(e),e=setTimeout(()=>r=0,rs)),n=s,r>=ts&&(t.messageBus.publish("rage_click"),r=0,clearTimeout(e))};return document.body.addEventListener("click",o),()=>{document.body.removeEventListener("click",o)}};f();var Eo=t=>{let s=0,l=-1,p=-1,u=-1,h,c=m=>{let{clientX:d,clientY:i,timeStamp:a}=m;if(l!==-1&&p!==-1&&u!==-1){let y=Math.abs(d-l),b=Math.abs(i-p);Math.sqrt(y**2+b**2)/(a-u)>5&&a-u<=100&&(s+=1,clearTimeout(h),h=setTimeout(()=>s=0,500)),s>=15&&(t.messageBus.publish("user_confusion"),s=0,clearTimeout(h))}l=d,p=i,u=a};return document.body.addEventListener("mousemove",c),()=>{document.body.removeEventListener("mousemove",c)}};f();var xo=B(Fn()),os=5e3,is=6e4,ko=t=>{let e=!1,r=()=>{e&&t.messageBus.publish("user_inactive")};setTimeout(()=>e=!0,is);let n=(0,xo.default)(r,os);return document.body.addEventListener("mousemove",n),document.body.addEventListener("keydown",n),()=>{document.body.removeEventListener("mousemove",n),document.body.removeEventListener("keydown",n)}};f();var To=t=>{t.messageBus.subscribe("location_change",()=>{var r,n,o;(r=ae(t))==null||r.forEach(s=>{let l=s.getSnapshot(),p=l.context.nudge;l.matches({Step:"Render Loop"})&&Dr(t,p)&&(s==null||s.send({type:"CLOSE"}))});let e=Pr(((n=t.organization)==null?void 0:n.shareLinkParam)||Ct,t.location.search);if(e){let s=e.flagKey,l=Se(t);if((o=t.nudgesManager)==null||o.send({type:"HANDLE_SHARE_LINK",flagKey:s}),l.find(p=>p.flagKey===s)){let p=new URL(window.location.href);p.searchParams.delete(Ct);let u=p.toString();window.history.replaceState({},document.title,u)}}Ot(t,{trigger:{type:"active"},source:{type:"active"},overrides:{cooldown:!0,customThrottles:!0,page:!0}}),Ot(t,{trigger:{type:"immediately"},source:{type:"trigger",properties:{triggerType:"immediately"}}})})};f();var Io=t=>{let e=r=>{let n=r.data.action;if(n)n==="startDebugSession"?t.messageBus.publish("start_debug",{event:r}):n==="startRecorderSession"&&t.messageBus.publish("start_recorder",{event:r});else return};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}};f();f();var Co=B(Fn());var ss={observerOptions:{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]},debounceMs:150},ut=class{constructor(e,r,n=[],o={}){this.mutationObserver=null;this.processMutationsImmediately=()=>{if(this.mutationObserver)try{this.onMutations()}catch(e){E.error("Error processing mutations:",{error:e})}};this.handleMutations=e=>{try{e.some(n=>this.shouldProcessMutation(n))&&this.processMutationsDebounced()}catch(r){E.error("Error handling mutations:",{error:r,mutationCount:e.length})}};this.target=e,this.onMutations=r,this.filters=n,this.options={...ss,...o},this.processMutationsDebounced=(0,Co.default)(this.processMutationsImmediately,this.options.debounceMs,{maxWait:this.options.debounceMs*2})}shouldProcessMutation(e){if(this.filters.length===0)return!0;try{return this.filters.every(r=>r(e))}catch(r){return E.error("Error in mutation filter:",{error:r,mutation:e}),!1}}cleanup(){var e;this.processMutationsDebounced.cancel(),(e=this.mutationObserver)==null||e.disconnect(),this.mutationObserver=null}observe(){return this.mutationObserver&&this.cleanup(),this.mutationObserver=new MutationObserver(this.handleMutations),this.mutationObserver.observe(this.target,this.options.observerOptions),()=>{this.cleanup()}}};var as=t=>!(ke(t.target)||Array.from(t.addedNodes).some(ke)||Array.from(t.removedNodes).some(ke)),_o=t=>new ut(document.documentElement,()=>{t.messageBus.publish("dom_mutation")},[as]).observe();f();f();var ne=B(z());var Ao=(t,e,r,n={})=>{var u,h,c,m,d;if((c=(h=(u=me())==null?void 0:u[O])==null?void 0:h.options)!=null&&c.headless)return;let o=(m=n==null?void 0:n.renderMode)!=null?m:0;e=Wr(e,t);let s=Br(e);if(Ge(e)){t.activeChecklist={nudge:e,renderMode:o,defaultOpenIdx:o===1?r:void 0};return}if(Ur(e)){let[i]=e.steps,a=`${e.variantId}-${String(i.id)}${o===1?"-mock":""}`;Be(a,{asChild:!0,element:ne.default.createElement(ao,{forceOpen:n==null?void 0:n.forceOpen,nudge:e,renderMode:o,step:i,anchorOverride:n==null?void 0:n.anchorOverride,handleDestroy:()=>De(t,e,o),onMarkerView:()=>{if(o===1)return;let y=G(t,e.variantId);Re.nudge.tooltipMarkerViewed(e,r,{...y==null?void 0:y.getSnapshot().context,interactionState:ee(t,e.variantId)})},onOpen:()=>{o!==1&&Re.nudge.viewed(e,r,{...n.context,interactionState:ee(t,e.variantId)})}})});return}if(Fr(e)){let[i]=e.steps,a=`${e.variantId}-${String(i.id)}${o===1?"-mock":""}`;qn(a,{element:ne.default.createElement(Ln,{nudge:e,stepIndex:r,renderMode:o}),sticky:i==null?void 0:i.formFactor.sticky,position:i==null?void 0:i.formFactor.position});return}let l=ge(e,r),p=()=>{s&&De(t,e,o)};switch(l==null?void 0:l.formFactor.type){case"popover":{let i=`${e.variantId}-${String(l.id)}${o===1?"-mock":""}`,a=l.formFactor.position==="center";Be(i,{element:ne.default.createElement(Ut,{nudge:e,renderMode:o,stepIndex:r,center:a}),position:l.formFactor.position,duration:Number.POSITIVE_INFINITY,hasWideContent:At(l),themeProvider:({children:y})=>ne.default.createElement(se,{nudge:e},y),onEscapeKeyDown:p});break}case"modal":{t.currentModalNudge=Cr({nudge:e,stepIndex:r,renderMode:o});break}case"pin":{Ye(l)&&Be(`${e.variantId}-${String(l.id)}${o===1?"-mock":""}`,{element:ne.default.createElement(Bn,{nudge:e,step:l,renderMode:o,stepIndex:r,anchorOverride:n==null?void 0:n.anchorOverride}),duration:Number.POSITIVE_INFINITY,themeProvider:({children:i})=>ne.default.createElement(se,{nudge:e},i),onEscapeKeyDown:p,onEnterKeyDown:()=>Zr(t,e)});break}default:{(d=sr())==null||d.captureMessage(`Unknown form factor type: ${l==null?void 0:l.formFactor}`,"error",{captureContext:{tags:{product:"nudges"}}});let i=l&&At(l);Be(`${e.variantId}-${String(l==null?void 0:l.id)}${o===1?"-mock":""}`,{element:ne.default.createElement(Ut,{nudge:e,renderMode:o,stepIndex:r}),position:"top-right",duration:Number.POSITIVE_INFINITY,hasWideContent:i,themeProvider:({children:a})=>ne.default.createElement(se,{nudge:e},a),onEscapeKeyDown:p})}}};f();var Mo=(t,e)=>{let r=xe(t);if(!r)return;let n=()=>{e()};return r.addEventListener("click",n),()=>r.removeEventListener("click",n)};f();var No=(t,e)=>{var r,n;for(let o=0;o<e.steps.length;o++){let s=ge(e,o);((r=t.currentModalNudge)==null?void 0:r.renderMode)===1&&(t.currentModalNudge=null),((n=t.activeChecklist)==null?void 0:n.renderMode)===1&&(t.activeChecklist=null),Bt(`${e.variantId}-${String(s==null?void 0:s.id)}-mock`),Kt(`${e.variantId}-${String(s==null?void 0:s.id)}-mock`)}},Po=t=>{var e,r;an(/-mock$/),Gn(/-mock$/),((e=t.currentModalNudge)==null?void 0:e.renderMode)===1&&(t.currentModalNudge=null),((r=t.activeChecklist)==null?void 0:r.renderMode)===1&&(t.activeChecklist=null)},Oo=(t,e,r)=>{var o;let n=ge(e,r);if(Ge(e)){if(!t.activeChecklist)return;t.activeChecklist=null}else $r(n)&&((o=t.currentModalNudge)==null?void 0:o.renderMode)!==1?t.currentModalNudge=null:(Bt(`${e.variantId}-${String(n==null?void 0:n.id)}`),Kt(`${e.variantId}-${String(n==null?void 0:n.id)}`))};f();var Ro=(t,e)=>{Un(t,e)},Do=(t,e)=>{t.resourceCenter.currentContentItemId=e?e.toString():null},Bo=(t,e)=>{t.resourceCenter.previewedRecommendationSet=e},Lo=(t,e,r)=>{t.resourceCenter={...t.resourceCenter,...e,previewedAdditionalResources:r}},Uo=(t,e)=>{t.resourceCenter.customAutopilotKeywords=e};f();var Fo=async(t,e)=>{var n,o;let r=()=>{};switch((n=e==null?void 0:e.meta)==null?void 0:n.type){case"intercom":r=()=>window.Intercom("showNewMessage");break;case"helpscout":r=()=>window.Beacon("open");break;case"freshdesk":r=()=>window.FreshworksWidget("open");break;case"freshchat":{r=async()=>window.fcWidget.open();break}case"gist":r=()=>window.gist.chat("open");break;case"crisp":r=()=>{window.$crisp.push(["do","chat:open"]),window.$crisp.push(["do","chat:show"])};break;case"talkdesk_v2":r=()=>{window.webchat.open()};break;case"zendesk":{r=()=>{try{window.zE("messenger","open")}catch(s){window.zE("webWidget","open"),window.zE("webWidget","show")}};break}case"liveChat":r=()=>window.LiveChatWidget.call("maximize");break;case"olark":r=()=>window.olark("api.box.expand");break;case"hubspot":r=()=>window.HubSpotConversations.widget.open();break;case"drift":r=()=>window.drift.api.openChat();break;case"pylon":r=()=>window.Pylon("show")}try{await r()}catch(s){(o=Q())==null||o.captureException(s)}},$o=(t,e,r)=>{let n=Hr(e.value,t,!0);if(r){window.open(n,"_blank");return}switch(e.operation){case"router":{let o=t.callbacks["engagement-router"];if(o)o(n);else throw new Kr("Link is of router type, but router is not defined.");break}case"self":window.open(n,"_self");break;case"blank":window.open(n,"_blank");break;default:window.open(n,"_blank");break}};var cs=Ko().UAParser,ds=()=>typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||"",ls=t=>{var e,r;return[(e=t.browser)==null?void 0:e.name,(r=t.browser)==null?void 0:r.major].filter(n=>n!=null).join(" ")},us=t=>{var e;return(e=t.os)==null?void 0:e.name},ps=t=>{var r;let e=(r=t.browser)==null?void 0:r.name;return e!=null&&e.includes("Chrom")&&(e="Chrome"),e!=null&&e.includes("Firefox")&&(e="Firefox"),e!=null&&e.includes("Safari")&&(e="Safari"),e!=null&&e.includes("Edge")&&(e="Edge"),e!=null&&e.includes("Opera")&&(e="Opera"),e||"Unknown"},ms=()=>{var t;if((t=window==null?void 0:window.document)!=null&&t.cookie)try{return Object.fromEntries(window.document.cookie.split("; ").map(e=>e.split("=")))}catch(e){return}},gs=t=>{var e,r;try{let n=JSON.parse(Pt.get(t,"{}"));return n.landing_url||(n.landing_url=(r=(e=window==null?void 0:window.location)==null?void 0:e.href)==null?void 0:r.replace(/\/$/,""),Pt.set(t,JSON.stringify(n))),n.landing_url}catch(n){return}},fs=t=>{try{let e=JSON.parse(X.get(t,"{}"));return e.first_seen||(e.first_seen=(Date.now()/1e3).toString(),X.set(t,JSON.stringify(e))),e.first_seen}catch(e){return}},hs=()=>{var e;if(!(window!=null&&window.location))return;let t={};try{let r=new URL(window.location.href);for(let[n,o]of r.searchParams)t[n]=[...(e=t[n])!=null?e:[],...o.split(",")]}catch(r){return}return Object.entries(t).reduce((r,[n,o])=>(r[n]=o.length===1?o[0]:o,r),{})},ys=t=>{var n,o,s,l,p,u,h;let e=typeof(window==null?void 0:window.navigator)<"u"?window.navigator.userAgent:void 0,r=new cs(e).getResult();return{language:ds(),platform:"Web",os:ls(r),device_model:us(r),device_category:(o=(n=r.device)==null?void 0:n.type)!=null?o:"desktop",referring_url:(s=window==null?void 0:window.document)==null?void 0:s.referrer.replace(/\/$/,""),cookie:ms(),browser:ps(r),landing_url:gs(`ENGAGEMENT_${(p=(l=window.engagement)==null?void 0:l[O].apiKey)==null?void 0:p.slice(0,10)}_DEFAULT_USER_PROVIDER`),first_seen:fs(`ENGAGEMENT_${(h=(u=window.engagement)==null?void 0:u[O].apiKey)==null?void 0:h.slice(0,10)}_DEFAULT_USER_PROVIDER`),url_param:hs(),user_agent:e,...t}},Ho={renderNudge:Ao,addClickListener:Mo,clickElement:pn,closeNudgeMock:No,closeAllNudgeMocks:Po,closeStep:Oo,onLocationChange:on,postMessageToDashboard:Je,openChatExecutable:Fo,linkExecutable:$o,getDefaultUIMode:rn,isElementVisible:mn,matchesSelector:un,showResourceCenter:Ro,setCurrentContentId:Do,previewRecSet:Bo,previewResourceCenter:Lo,previewAutopilotKeywords:Uo,enrichUser:ys};f();var Vt=async(t,e)=>{let r=await fetch(t,{...e,body:e.body!=""?e.body:void 0});return{status:r.status,statusText:r.statusText,headers:Object.fromEntries(r.headers.entries()),data:await r.text(),ok:r.ok}};typeof window<"u"?window.simpleFetch=Vt:typeof globalThis<"u"?globalThis.simpleFetch=Vt:typeof window<"u"&&(window.simpleFetch=Vt);f();var bs=t=>{let e=new TextEncoder().encode(t),r=Array.from(e,n=>String.fromCodePoint(n)).join("");return btoa(r)},ws=t=>{let e=atob(t),r=new TextEncoder().encode(e);return JSON.parse(new TextDecoder().decode(r))};globalThis.base64Encode=bs;globalThis.base64Decode=ws;f();var vs=t=>!t.target||!ke(t.target),Wo=t=>{let e=r=>{vs(r)&&t.messageBus.publish("click",{event:{type:r.type,target:r.target,currentTarget:r.currentTarget,preventDefault:()=>r.preventDefault(),stopPropagation:()=>r.stopPropagation()}})};return document.body.addEventListener("click",e),()=>{document.body.removeEventListener("click",e)}};f();var Ss=30,Es=0,zo=t=>{let e=null,r=()=>{t.messageBus.publish("exit_intent")},n=s=>{s.clientY>Ss||(e=setTimeout(r,Es))},o=()=>{e&&(clearTimeout(e),e=null)};return document.documentElement.addEventListener("mouseleave",n),document.documentElement.addEventListener("mouseenter",o),()=>{document.body.removeEventListener("mouseleave",n),document.body.removeEventListener("mouseenter",o)}};f();var Vo="gs-debug-id",jo=t=>{t.messageBus.subscribe("location_change",()=>{let r=new URLSearchParams(t.location.search).get(Vo);if(r){let n=new URL(window.location.href);n.searchParams.delete(Vo);let o=n.toString();window.history.replaceState({},document.title,o),Gr(t,{variantId:Number(r)},{toStepIndex:0})}})};var xs=()=>{let t=document.getElementById("engagement-wrapper"),e=document.getElementById("engagement-container");return t||(t=document.createElement("div"),t.setAttribute("id","engagement-wrapper"),t.setAttribute("data-engagement","1"),document.body.appendChild(t)),e||(e=document.createElement("div"),e.setAttribute("id","engagement-container"),e.setAttribute("data-engagement","1"),t.appendChild(e)),e},ks=t=>{switch(t){case"US":return"https://gs.amplitude.com";case"EU":return"https://gs.eu.amplitude.com";default:return"http://localhost:10001"}},Ts=t=>{switch(t){case"US":return"https://houston-chat.amplitude.com";case"EU":return"https://houston-chat.eu.amplitude.com";default:return"http://localhost:11001"}},jt={local:"http://localhost:10002/index.js",staging:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",stag:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",stag2:"https://cdn.amplitude.com/engagement-browser/staging/index.min.js.gz",rc:"https://cdn.amplitude.com/engagement-browser/rc/index.min.js.gz",prod:"https://cdn.amplitude.com/engagement-browser/prod/index.min.js.gz",prodEu:"https://cdn.amplitude.com/engagement-browser/prod-eu/index.min.js.gz"},qt={local:"http://localhost:10002/split/index.js",staging:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",stag:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",stag2:"https://cdn.amplitude.com/engagement-browser/staging/split/index.js",rc:"https://cdn.amplitude.com/engagement-browser/rc/split/index.js",prod:"https://cdn.amplitude.com/engagement-browser/prod/split/index.js",prodEu:"https://cdn.amplitude.com/engagement-browser/prod-eu/split/index.js"},Gt={local:"http://localhost:10001",staging:"https://gs.stag2.amplitude.com",stag:"https://gs.stag2.amplitude.com",stag2:"https://gs.stag2.amplitude.com",prod:"https://gs.amplitude.com",prodUs:"https://gs.amplitude.com",prodEu:"https://gs.eu.amplitude.com"},Yt={local:"http://localhost:11001",staging:"https://houston-chat.stag2.amplitude.com",stag:"https://houston-chat.stag2.amplitude.com",stag2:"https://houston-chat.stag2.amplitude.com",rc:"https://houston-chat.stag2.amplitude.com",prod:"https://houston-chat.amplitude.com",prodUs:"https://houston-chat.amplitude.com",prodEu:"https://houston-chat.eu.amplitude.com"};function Is(t){let e={};return t.split(";").forEach(n=>{let[o,s]=n.split("=");o&&(e[o]=s)}),e}var qo=async()=>{var m,d,i,a,y,b;let t=localStorage.getItem("amplitude.engagement.launchCode");if(t){let g=Is(t),w=document.currentScript||document.getElementById("engagement-sdk-bundle");if(w){let v=window.engagement[O].options.splitting&&(g==null?void 0:g.sdk)!=="local",M=v?qt==null?void 0:qt[g==null?void 0:g.sdk]:jt==null?void 0:jt[g==null?void 0:g.sdk];if(M&&w.src!==M){(m=w.parentNode)==null||m.removeChild(w);let x=document.createElement("script");x.src=M,x.id="engagement-sdk-bundle";let D=document.querySelector("[nonce]");D&&x.setAttribute("nonce",D.nonce||D.getAttribute("nonce")),v&&x.setAttribute("type","module"),document.getElementsByTagName("head")[0].appendChild(x);return}}if(g!=null&&g.server){let v=Gt==null?void 0:Gt[g==null?void 0:g.server];v&&(window.engagement[O].serverUrl=v);let M=Yt==null?void 0:Yt[g==null?void 0:g.server];M&&(window.engagement[O].chatUrl=M)}}if(((d=window.engagement)==null?void 0:d._initStarted)===!0)return;window.engagement&&(window.engagement._initStarted=!0);let e=window.engagement,{apiKey:r,serverUrl:n,serverZone:o,chatUrl:s}=e._configuration,l=X.get("takeover","");if(!r)throw new Error("Organization `apiKey` has not been set on the global _configuration object. Make sure you've called `init` before loading this script");let p=X.get("localeOverride","");p&&(e[O].locale=p),e[O].serverUrl=n||ks(o),e[O].chatUrl=s||Ts(o),e[O].apiKey=r,(i=e[O].options)!=null&&i.logger?console.log("Using custom logger",e[O].options.logger):(console.log("Using default logger"),e[O].options.logger=new ir),(a=e[O].options)!=null&&a.logger&&e[O].options.logger.enable((b=(y=e[O].options)==null?void 0:y.logLevel)!=null?b:2),l&&(e[O].apiKey=l),E.log("initializing client SDK..."),sn();let u=document.getElementById("engagement-is-dashboard-preview-pane")!==null,h=Qr({isEditorPreview:u,platform:nn(),location:{href:window.location.href,pathname:window.location.pathname,search:window.location.search},services:Ho,persistResourceCenter:e._configuration.options.persistResourceCenter});en(h),e._configuration.options.headless||(So(h),Eo(h),ko(h),zo(h),_o(h),Wo(h),To(h),jo(h)),Io(h);let c=new lt(h,e._configuration);if(await c._configUser(),c=await vo(c,e._q),Object.assign(window.engagement,c),Object.setPrototypeOf(window.engagement,c),e._configuration.options.headless)E.debug("Engagement bundle loaded in headless mode - no UI rendered");else{let g=xs();Yo.default.render(Go.default.createElement(lo,{store:h}),g),E.debug("Engagement bundle loaded and container rendered")}};Je("ENGAGEMENT_LOADED");window.engagement?qo().catch(console.error):window.engagement=wo(qo);var zu=void 0;export{zu as default};
